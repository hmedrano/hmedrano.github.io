<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 7.0.1" />
    <title>erddapClient API documentation</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%2244.5%202.5%2015%2015%22%3E%3Cpath%20d%3D%22M49.351%2021.041c-.233-.721-.546-2.408-.772-4.076-.042-.09-.067-.187-.046-.288-.166-1.347-.277-2.625-.241-3.351-1.378-1.008-2.271-2.586-2.271-4.362%200-.976.272-1.935.788-2.774.057-.094.122-.18.184-.268-.033-.167-.052-.339-.052-.516%200-1.477%201.202-2.679%202.679-2.679.791%200%201.496.352%201.987.9a6.3%206.3%200%200%201%201.001.029c.492-.564%201.207-.929%202.012-.929%201.477%200%202.679%201.202%202.679%202.679a2.65%202.65%200%200%201-.269%201.148c.383.747.595%201.572.595%202.41%200%202.311-1.507%204.29-3.635%205.107.037.699.147%202.27.423%203.294l.137.461c.156%202.136-4.612%205.166-5.199%203.215zm.127-4.919a4.78%204.78%200%200%200%20.775-.584c-.172-.115-.505-.254-.88-.378zm.331%202.302l.828-.502c-.202-.143-.576-.328-.984-.49zm.45%202.157l.701-.403c-.214-.115-.536-.249-.891-.376l.19.779zM49.13%204.141c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm.735-.389a1.15%201.15%200%200%201%20.314.783%201.16%201.16%200%200%201-1.162%201.162c-.457%200-.842-.27-1.032-.653-.026.117-.042.238-.042.362a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.843-.626-1.535-1.436-1.654zm3.076%201.654a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.037-.009-.072-.011-.109-.21.3-.541.508-.935.508a1.16%201.16%200%200%201-1.162-1.162%201.14%201.14%200%200%201%20.474-.912c-.015%200-.03-.005-.045-.005-.926.001-1.679.754-1.679%201.68zm1.861-1.265c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm1.823%204.823c0-.52-.103-1.035-.288-1.52-.466.394-1.06.64-1.717.64-1.144%200-2.116-.725-2.499-1.738-.383%201.012-1.355%201.738-2.499%201.738-.867%200-1.631-.421-2.121-1.062-.307.605-.478%201.267-.478%201.942%200%202.486%202.153%204.51%204.801%204.51s4.801-2.023%204.801-4.51zm-3.032%209.156l-.146-.492c-.276-1.02-.395-2.457-.444-3.268a6.11%206.11%200%200%201-1.18.115%206.01%206.01%200%200%201-2.536-.562l.006.175c.802.215%201.848.612%202.021%201.25.079.295-.021.601-.274.837l-.598.501c.667.304%201.243.698%201.311%201.179.02.144.022.507-.393.787l-.564.365c1.285.521%201.361.96%201.381%201.126.018.142.011.496-.427.746l-.854.489c.064-1.19%201.985-2.585%202.697-3.248zM49.34%209.925c0-.667%201-.667%201%200%200%20.653.818%201.205%201.787%201.205s1.787-.552%201.787-1.205c0-.667%201-.667%201%200%200%201.216-1.25%202.205-2.787%202.205s-2.787-.989-2.787-2.205zm-.887-7.633c-.093.077-.205.114-.317.114a.5.5%200%200%201-.318-.886L49.183.397a.5.5%200%200%201%20.703.068.5.5%200%200%201-.069.703zm7.661-.065c-.086%200-.173-.022-.253-.068l-1.523-.893c-.575-.337-.069-1.2.506-.863l1.523.892a.5.5%200%200%201%20.179.685c-.094.158-.261.247-.432.247z%22%20fill%3D%22%233bb300%22/%3E%3C/svg%3E"/>


<style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
<style>/*! pygments syntax highlighting */pre{line-height:125%;}td.linenos pre{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}span.linenos{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}td.linenos pre.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}.pdoc .hll{background-color:#ffffcc}.pdoc{background:#f8f8f8;}.pdoc .c{color:#408080; font-style:italic}.pdoc .err{border:1px solid #FF0000}.pdoc .k{color:#008000; font-weight:bold}.pdoc .o{color:#666666}.pdoc .ch{color:#408080; font-style:italic}.pdoc .cm{color:#408080; font-style:italic}.pdoc .cp{color:#BC7A00}.pdoc .cpf{color:#408080; font-style:italic}.pdoc .c1{color:#408080; font-style:italic}.pdoc .cs{color:#408080; font-style:italic}.pdoc .gd{color:#A00000}.pdoc .ge{font-style:italic}.pdoc .gr{color:#FF0000}.pdoc .gh{color:#000080; font-weight:bold}.pdoc .gi{color:#00A000}.pdoc .go{color:#888888}.pdoc .gp{color:#000080; font-weight:bold}.pdoc .gs{font-weight:bold}.pdoc .gu{color:#800080; font-weight:bold}.pdoc .gt{color:#0044DD}.pdoc .kc{color:#008000; font-weight:bold}.pdoc .kd{color:#008000; font-weight:bold}.pdoc .kn{color:#008000; font-weight:bold}.pdoc .kp{color:#008000}.pdoc .kr{color:#008000; font-weight:bold}.pdoc .kt{color:#B00040}.pdoc .m{color:#666666}.pdoc .s{color:#BA2121}.pdoc .na{color:#7D9029}.pdoc .nb{color:#008000}.pdoc .nc{color:#0000FF; font-weight:bold}.pdoc .no{color:#880000}.pdoc .nd{color:#AA22FF}.pdoc .ni{color:#999999; font-weight:bold}.pdoc .ne{color:#D2413A; font-weight:bold}.pdoc .nf{color:#0000FF}.pdoc .nl{color:#A0A000}.pdoc .nn{color:#0000FF; font-weight:bold}.pdoc .nt{color:#008000; font-weight:bold}.pdoc .nv{color:#19177C}.pdoc .ow{color:#AA22FF; font-weight:bold}.pdoc .w{color:#bbbbbb}.pdoc .mb{color:#666666}.pdoc .mf{color:#666666}.pdoc .mh{color:#666666}.pdoc .mi{color:#666666}.pdoc .mo{color:#666666}.pdoc .sa{color:#BA2121}.pdoc .sb{color:#BA2121}.pdoc .sc{color:#BA2121}.pdoc .dl{color:#BA2121}.pdoc .sd{color:#BA2121; font-style:italic}.pdoc .s2{color:#BA2121}.pdoc .se{color:#BB6622; font-weight:bold}.pdoc .sh{color:#BA2121}.pdoc .si{color:#BB6688; font-weight:bold}.pdoc .sx{color:#008000}.pdoc .sr{color:#BB6688}.pdoc .s1{color:#BA2121}.pdoc .ss{color:#19177C}.pdoc .bp{color:#008000}.pdoc .fm{color:#0000FF}.pdoc .vc{color:#19177C}.pdoc .vg{color:#19177C}.pdoc .vi{color:#19177C}.pdoc .vm{color:#19177C}.pdoc .il{color:#666666}</style>
<style>/*! pdoc */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f7f7f7;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}body{background-color:var(--pdoc-background);}html, body{width:100%;height:100%;}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}.git-button{display:none !important;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}#navtoggle{display:none;}}#togglestate{display:none;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}html, main{scroll-behavior:smooth;}.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{background-color:var(--code);border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{--shift:-40px;text-align:right;margin-top:var(--shift);margin-bottom:calc(0px - var(--shift));clear:both;filter:opacity(1);}.pdoc details:not([open]){height:0;overflow:visible;}.pdoc details > summary{font-size:.75rem;cursor:pointer;color:var(--muted);border-width:0;padding:0 .7em;display:inline-block;display:inline list-item;user-select:none;}.pdoc details > summary:focus{outline:0;}.pdoc details > div{margin-top:calc(0px - var(--shift) / 2);text-align:left;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:3rem;}.pdoc .docstring pre{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{display:block;color:var(--text);margin:1rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}</style>
</head>
<body>        <nav class="pdoc">
            <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
            <input id="togglestate" type="checkbox">
            <div>

                    <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                           pattern=".+" required>




                    <h2>API Documentation</h2>
                        <ul class="memberlist">
            <li>
                    <a class="class" href="#ERDDAP_Server">ERDDAP_Server</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ERDDAP_Server.__init__">ERDDAP_Server</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Server.ALLDATASETS_VARIABLES">ALLDATASETS_VARIABLES</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Server.tabledapAllDatasets">tabledapAllDatasets</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Server.version_numeric">version_numeric</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Server.version">version</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Server.version_string">version_string</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Server.search">search</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Server.getSearchURL">getSearchURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Server.advancedSearch">advancedSearch</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Server.getAdvancedSearchURL">getAdvancedSearchURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Server.getQueryAllDatasetsURL">getQueryAllDatasetsURL</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Server.statusPageURL">statusPageURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Server.parseStatusPage">parseStatusPage</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Server.statusValues">statusValues</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ERDDAP_Dataset">ERDDAP_Dataset</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.__init__">ERDDAP_Dataset</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Dataset.DEFAULT_FILETYPE">DEFAULT_FILETYPE</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Dataset.BINARY_FILETYPES">BINARY_FILETYPES</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.setResultVariables">setResultVariables</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.addResultVariable">addResultVariable</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.setConstraints">setConstraints</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.addConstraints">addConstraints</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.addConstraint">addConstraint</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.getDataRequestURL">getDataRequestURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.getURL">getURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.getBaseURL">getBaseURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.getAttribute">getAttribute</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.loadMetadata">loadMetadata</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Dataset.variables">variables</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Dataset.dimensions">dimensions</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Dataset.info">info</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.getMetadataURL">getMetadataURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.clearConstraints">clearConstraints</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.clearServerSideFunctions">clearServerSideFunctions</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.clearResultVariables">clearResultVariables</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.clearQuery">clearQuery</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.getData">getData</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Dataset.getDataFrame">getDataFrame</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ERDDAP_Tabledap">ERDDAP_Tabledap</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.__init__">ERDDAP_Tabledap</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Tabledap.DEFAULT_FILETYPE">DEFAULT_FILETYPE</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.loadMetadata">loadMetadata</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.addVariablesWhere">addVariablesWhere</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.distinct">distinct</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.units">units</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderBy">orderBy</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderByClosest">orderByClosest</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderByCount">orderByCount</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderByLimit">orderByLimit</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderByMax">orderByMax</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderByMin">orderByMin</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderByMinMax">orderByMinMax</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.orderByMean">orderByMean</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Tabledap.addServerSideFunction">addServerSideFunction</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ERDDAP_Griddap">ERDDAP_Griddap</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.__init__">ERDDAP_Griddap</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Griddap.DEFAULT_FILETYPE">DEFAULT_FILETYPE</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.loadMetadata">loadMetadata</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Griddap.dimensions">dimensions</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.clearQuery">clearQuery</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.loadDimensionValues">loadDimensionValues</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.getxArray">getxArray</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.getncDataset">getncDataset</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.getDataRequestURL">getDataRequestURL</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.setSubset">setSubset</a>
                        </li>
                        <li>
                                <a class="function" href="#ERDDAP_Griddap.setSubsetI">setSubsetI</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Griddap.positional_indexes">positional_indexes</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Griddap.xarray">xarray</a>
                        </li>
                        <li>
                                <a class="variable" href="#ERDDAP_Griddap.ncDataset">ncDataset</a>
                        </li>
                </ul>

            </li>
    </ul>


                    <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
                        built with <span class="visually-hidden">pdoc</span><img
                            alt="pdoc logo"
                            src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
                    </a>
            </div>
        </nav>
    <main class="pdoc">
            <section>
                    <h1 class="modulename">
erddapClient    </h1>

                
                        <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">erddapClient.erddap_server</span> <span class="kn">import</span> <span class="n">ERDDAP_Server</span>
<span class="kn">from</span> <span class="nn">erddapClient.erddap_dataset</span> <span class="kn">import</span> <span class="n">ERDDAP_Dataset</span>
<span class="kn">from</span> <span class="nn">erddapClient.erddap_tabledap</span> <span class="kn">import</span> <span class="n">ERDDAP_Tabledap</span>
<span class="kn">from</span> <span class="nn">erddapClient.erddap_griddap</span> <span class="kn">import</span> <span class="n">ERDDAP_Griddap</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ERDDAP_Server&quot;</span><span class="p">,</span> <span class="s2">&quot;ERDDAP_Dataset&quot;</span><span class="p">,</span> <span class="s2">&quot;ERDDAP_Tabledap&quot;</span><span class="p">,</span> <span class="s2">&quot;ERDDAP_Griddap&quot;</span><span class="p">]</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.0.10b&quot;</span>
</pre></div>

        </details>

            </section>
                <section id="ERDDAP_Server">
                                <div class="attr class">
        <a class="headerlink" href="#ERDDAP_Server">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ERDDAP_Server</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ERDDAP_Server</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class with the representation and methods to access a ERDDAP server.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ALLDATASETS_VARIABLES</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;datasetID&#39;</span><span class="p">,</span><span class="s1">&#39;accessible&#39;</span><span class="p">,</span><span class="s1">&#39;institution&#39;</span><span class="p">,</span><span class="s1">&#39;dataStructure&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;cdm_data_type&#39;</span><span class="p">,</span><span class="s1">&#39;class&#39;</span><span class="p">,</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="s1">&#39;minLongitude&#39;</span><span class="p">,</span><span class="s1">&#39;maxLongitude&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;longitudeSpacing&#39;</span><span class="p">,</span><span class="s1">&#39;minLatitude&#39;</span><span class="p">,</span><span class="s1">&#39;maxLatitude&#39;</span><span class="p">,</span><span class="s1">&#39;latitudeSpacing&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;minAltitude&#39;</span><span class="p">,</span><span class="s1">&#39;maxAltitude&#39;</span><span class="p">,</span><span class="s1">&#39;minTime&#39;</span><span class="p">,</span><span class="s1">&#39;maxTime&#39;</span><span class="p">,</span><span class="s1">&#39;timeSpacing&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;griddap&#39;</span><span class="p">,</span><span class="s1">&#39;subset&#39;</span><span class="p">,</span><span class="s1">&#39;tabledap&#39;</span><span class="p">,</span><span class="s1">&#39;MakeAGraph&#39;</span><span class="p">,</span><span class="s1">&#39;sos&#39;</span><span class="p">,</span><span class="s1">&#39;wcs&#39;</span><span class="p">,</span><span class="s1">&#39;wms&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;files&#39;</span><span class="p">,</span><span class="s1">&#39;fgdc&#39;</span><span class="p">,</span><span class="s1">&#39;iso19115&#39;</span><span class="p">,</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span><span class="s1">&#39;sourceUrl&#39;</span><span class="p">,</span><span class="s1">&#39;infoUrl&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;rss&#39;</span><span class="p">,</span><span class="s1">&#39;email&#39;</span><span class="p">,</span><span class="s1">&#39;testOutOfDate&#39;</span><span class="p">,</span><span class="s1">&#39;outOfDate&#39;</span><span class="p">,</span><span class="s1">&#39;summary&#39;</span> <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs a ERDDAP Server object </span>
<span class="sd">        ...</span>
<span class="sd">        Arguments:</span>

<span class="sd">        `url`  : The ERDDAP Server URL </span>

<span class="sd">        `auth` : Tupple with username and password, to access a protected ERDDAP Server</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span> <span class="o">=</span> <span class="n">url</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="n">auth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabledapAllDatasets</span> <span class="o">=</span> <span class="n">ERDDAP_Dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="s1">&#39;allDatasets&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
        <span class="sd">&quot;&quot;&quot; An `erddapClient.ERDDAP_Tabledap` object with the reference to the &quot;allDatasets&quot; </span>
<span class="sd">            Dataset, [About allDatasets](https://coastwatch.pfeg.noaa.gov/erddap/download/setupDatasetsXml.html#EDDTableFromAllDatasets) &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__status_values</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">erddap_server_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">version_numeric</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__version_numeric&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__version_numeric</span> <span class="o">=</span> <span class="n">parseNumericVersion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__version_numeric</span>  

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__version&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">req</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span>
                <span class="n">__version</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">text</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__version</span> <span class="o">=</span> <span class="n">__version</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__version</span> <span class="o">=</span> <span class="s1">&#39;ERDDAP_version=&lt;1.22&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__version</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">version_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__version_string&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                 <span class="n">req</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="s1">&#39;version_string&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span>
                 <span class="n">__version_string</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">text</span>
                 <span class="bp">self</span><span class="o">.</span><span class="n">__version_string</span> <span class="o">=</span> <span class="n">__version_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__version_string</span> <span class="o">=</span> <span class="s1">&#39;ERDDAP_version_string=&lt;1.80&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__version_string</span>


    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">filters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a search request to the ERDDAP Server</span>

<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor` :</span>

<span class="sd">        * This is a Google-like search of the datasets metadata:</span>
<span class="sd">          Type the words you want to search for, with spaces between </span>
<span class="sd">          the words.  ERDDAP will search for the words separately, </span>
<span class="sd">          not as a phrase. </span>
<span class="sd">        * To search for a phrase, put double quotes around the </span>
<span class="sd">          phrase (for example, &quot;wind speed&quot;). </span>
<span class="sd">          To exclude datasets with a specific word, use </span>
<span class="sd">          -excludedWord To exclude datasets with a specific </span>
<span class="sd">          phrase, use -&quot;excluded phrase&quot;. </span>
<span class="sd">        * Don&#39;t use AND between search terms. It is implied. The </span>
<span class="sd">          results will include only the datasets that have all of </span>
<span class="sd">          the specified words and phrases (and none of the excluded </span>
<span class="sd">          words and phrases) in the dataset&#39;s metadata (data about </span>
<span class="sd">          the dataset). </span>
<span class="sd">        * Searches are not case-sensitive. </span>
<span class="sd">        * To search for specific attribute values, use </span>
<span class="sd">          attName=attValue . </span>
<span class="sd">        * To find just grid or just table datasets, include </span>
<span class="sd">          protocol=griddap or protocol=tabledap in your search. </span>
<span class="sd">        * This ERDDAP is using searchEngine=original. </span>
<span class="sd">        * In this ERDDAP, you can search for any part of a word. </span>
<span class="sd">        * For example, searching for spee will find datasets with </span>
<span class="sd">          speed and datasets with WindSpeed. </span>
<span class="sd">        * In this ERDDAP, the last word in a phrase may be a partial </span>
<span class="sd">          word. For example, to find datasets from a specific website </span>
<span class="sd">          (usually the start of the datasetID), include (for example) </span>
<span class="sd">          &quot;datasetID=erd&quot; in your search.</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `itemsPerPage` : Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page` : If the number of results is bigger than the &quot;`itemsPerPage`&quot; you can</span>
<span class="sd">                specify the page of results. (Default: 1)</span>

<span class="sd">        Returns a `erddapClient.ERDDAP_SearchResults` object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">searchURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSearchURL</span><span class="p">(</span> <span class="o">**</span><span class="n">filters</span><span class="p">)</span>
        <span class="n">rawSearchResults</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="n">searchURL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span>
        <span class="n">dictSearchResult</span> <span class="o">=</span> <span class="n">rawSearchResults</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">formatedResults</span> <span class="o">=</span> <span class="n">ERDDAP_SearchResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">dictSearchResult</span><span class="p">[</span><span class="s1">&#39;table&#39;</span><span class="p">][</span><span class="s1">&#39;rows&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">formatedResults</span>


    <span class="k">def</span> <span class="nf">getSearchURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">searchFilters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds the url call for the basic Search ERDDAP API Rest service.</span>

<span class="sd">        Arguments</span>

<span class="sd">        `filetype` :  The result format (htmlTable, csv, json, tsv, etc) </span>
<span class="sd">                      [https://coastwatch.pfeg.noaa.gov/erddap/rest.html#responses](https://coastwatch.pfeg.noaa.gov/erddap/rest.html#responses)</span>


<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor`        </span>

<span class="sd">        * This is a Google-like search of the datasets metadata:</span>
<span class="sd">          Type the words you want to search for, with spaces between </span>
<span class="sd">          the words.  ERDDAP will search for the words separately, </span>
<span class="sd">          not as a phrase. </span>
<span class="sd">        * To search for a phrase, put double quotes around the </span>
<span class="sd">          phrase (for example, &quot;wind speed&quot;). </span>
<span class="sd">          To exclude datasets with a specific word, use </span>
<span class="sd">          -excludedWord To exclude datasets with a specific </span>
<span class="sd">          phrase, use -&quot;excluded phrase&quot;. </span>
<span class="sd">        * Don&#39;t use AND between search terms. It is implied. The </span>
<span class="sd">          results will include only the datasets that have all of </span>
<span class="sd">          the specified words and phrases (and none of the excluded </span>
<span class="sd">          words and phrases) in the dataset&#39;s metadata (data about </span>
<span class="sd">          the dataset). </span>
<span class="sd">        * Searches are not case-sensitive. </span>
<span class="sd">        * To search for specific attribute values, use </span>
<span class="sd">          attName=attValue . </span>
<span class="sd">        * To find just grid or just table datasets, include </span>
<span class="sd">          protocol=griddap or protocol=tabledap in your search. </span>
<span class="sd">        * This ERDDAP is using searchEngine=original. </span>
<span class="sd">        * In this ERDDAP, you can search for any part of a word. </span>
<span class="sd">        * For example, searching for spee will find datasets with </span>
<span class="sd">          speed and datasets with WindSpeed. </span>
<span class="sd">        * In this ERDDAP, the last word in a phrase may be a partial </span>
<span class="sd">          word. For example, to find datasets from a specific website </span>
<span class="sd">          (usually the start of the datasetID), include (for example) </span>
<span class="sd">          &quot;datasetID=erd&quot; in your search.</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `itemsPerPage` :  Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page` : If the number of results is bigger than the &quot;itemsPerPage&quot; you can</span>
<span class="sd">                 specify the page of results. (Default: 1)           </span>

<span class="sd">        Returns a string with the url search request.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">searchAPIEndpoint</span> <span class="o">=</span> <span class="s2">&quot;search/index.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
        <span class="n">searchAPIURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">searchAPIEndpoint</span> <span class="p">)</span> 

        <span class="n">queryElementsDefaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;page&#39;</span>          <span class="p">:</span> <span class="mi">1</span> <span class="p">,</span>
                                  <span class="s1">&#39;itemsPerPage&#39;</span>  <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                                  <span class="s1">&#39;searchFor&#39;</span>     <span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">queryURL</span><span class="o">=</span><span class="p">[]</span>

        <span class="k">for</span> <span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span> <span class="ow">in</span> <span class="n">queryElementsDefaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>                      
            
            <span class="n">queryValue</span> <span class="o">=</span> <span class="n">searchFilters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">queryElement</span> <span class="o">==</span> <span class="s1">&#39;searchFor&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">queryValue</span><span class="p">:</span>
                    <span class="n">queryValue</span> <span class="o">=</span> <span class="n">quote_plus</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">continue</span>
 
            <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span> 
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">searchAPIURL</span><span class="p">,</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="n">queryURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=+-&amp;&#39;</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">advancedSearch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">filters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a advancedSearch request to the ERDDAP Server</span>

<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor` : This is a Google-like search of the datasets metadata, set the words you </span>
<span class="sd">                      want to search for  with spaces between the words.  ERDDAP will search </span>
<span class="sd">                      for the words separately, not as a phrase. </span>
<span class="sd">                      To search for a phrase, put double quotes around the phrase (for </span>
<span class="sd">                      example, &quot;wind speed&quot;). </span>
<span class="sd">                      To exclude datasets with a specific word, use -excludedWord. </span>
<span class="sd">                      To exclude datasets with a specific phrase, use -&quot;excluded phrase&quot; </span>
<span class="sd">                      To search for specific attribute values, use attName=attValue</span>
<span class="sd">                      To find just grid or table datasets, include protocol=griddap </span>
<span class="sd">                      or protocol=tabledap</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `protocolol`    : Set either: griddap, tabledap or wms (Default: (ANY))</span>

<span class="sd">        `cdm_data_type` : Set either: grid, timeseries, point, timeseriesProfile, trajectory</span>
<span class="sd">                          trajectoryProfile, etc.. (Default: (ANY))</span>

<span class="sd">        `institution`   : Set either to one of the available instituion values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `ioos_category` : Set either to one of the available ioos_category values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `keywords`      : Set either to one of the available keywords values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `long_name`     : Set either to one of the available long_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `standard_name` : Set either to one of the available standard_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `variableName`  : Set either to one of the available variable names values in the </span>
<span class="sd">                          ERDDAP (Default: (ANY))</span>
<span class="sd">          </span>
<span class="sd">        `minLon`, `maxLon` : Some datasets have longitude values within -180 to 180, others </span>
<span class="sd">                             use 0 to 360. If you specify Min and Max Longitude within -180 to 180</span>
<span class="sd">                             (or 0 to 360), ERDDAP will only find datasets that match the values </span>
<span class="sd">                             you specify. Consider doing one search: longitude -180 to 360, or </span>
<span class="sd">                             two searches: longitude -180 to 180, and 0 to 360.</span>

<span class="sd">        `minLat`, `maxLat` : Set latitude bounds, range -90 to 90 </span>

<span class="sd">        `minTime`, `maxTime` : Your can pass a &lt;datetime&gt; object or a string with the following</span>
<span class="sd">                               specifications</span>

<span class="sd">        &gt; </span>
<span class="sd">        - A time string with the format yyyy-MM-ddTHH:mm:ssZ,    </span>
<span class="sd">          for example, 2009-01-21T23:00:00Z.  If you specify something, you must include yyyy-MM-dd.   </span>
<span class="sd">          You can omit (backwards from the end) Z, :ss, :mm, :HH, and T.   </span>
<span class="sd">          Always use UTC (GMT/Zulu) time.   </span>
<span class="sd">        - Or specify the number of seconds since 1970-01-01T00:00:00Z.                                  </span>
<span class="sd">        - Or specify &quot;now-nUnits&quot;, for example, &quot;now-7days&quot;        </span>

<span class="sd">        `itemsPerPage` : Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page`         : If the number of results is bigger than the &quot;`itemsPerPage`&quot; you can</span>
<span class="sd">                         specify the page of results. (Default: 1)</span>

<span class="sd">        The search will find datasets that have some data within the specified </span>
<span class="sd">        time bounds.</span>

<span class="sd">        Returns a `erddapClient.ERDDAP_SearchResults` object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">searchURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAdvancedSearchURL</span><span class="p">(</span> <span class="o">**</span><span class="n">filters</span><span class="p">)</span>
        <span class="n">rawSearchResults</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="n">searchURL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span>
        <span class="n">dictSearchResult</span> <span class="o">=</span> <span class="n">rawSearchResults</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">formatedResults</span> <span class="o">=</span> <span class="n">ERDDAP_SearchResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">dictSearchResult</span><span class="p">[</span><span class="s1">&#39;table&#39;</span><span class="p">][</span><span class="s1">&#39;rows&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">formatedResults</span>


    <span class="k">def</span> <span class="nf">getAdvancedSearchURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">searchFilters</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds the url call for the advanced Search ERDDAP API Rest service.</span>

<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor` : This is a Google-like search of the datasets metadata, set the words you </span>
<span class="sd">                      want to search for  with spaces between the words.  ERDDAP will search </span>
<span class="sd">                      for the words separately, not as a phrase. </span>
<span class="sd">                      To search for a phrase, put double quotes around the phrase (for </span>
<span class="sd">                      example, &quot;wind speed&quot;). </span>
<span class="sd">                      To exclude datasets with a specific word, use -excludedWord. </span>
<span class="sd">                      To exclude datasets with a specific phrase, use -&quot;excluded phrase&quot; </span>
<span class="sd">                      To search for specific attribute values, use attName=attValue</span>
<span class="sd">                      To find just grid or table datasets, include protocol=griddap </span>
<span class="sd">                      or protocol=tabledap</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `protocolol`    : Set either: griddap, tabledap or wms (Default: (ANY))</span>

<span class="sd">        `cdm_data_type` : Set either: grid, timeseries, point, timeseriesProfile, trajectory</span>
<span class="sd">                          trajectoryProfile, etc.. (Default: (ANY))</span>

<span class="sd">        `institution`   : Set either to one of the available instituion values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `ioos_category` : Set either to one of the available ioos_category values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `keywords`      : Set either to one of the available keywords values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `long_name`     : Set either to one of the available long_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `standard_name` : Set either to one of the available standard_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `variableName`  : Set either to one of the available variable names values in the </span>
<span class="sd">                          ERDDAP (Default: (ANY))</span>
<span class="sd">          </span>
<span class="sd">        `minLon`, `maxLon` : Some datasets have longitude values within -180 to 180, others </span>
<span class="sd">                             use 0 to 360. If you specify Min and Max Longitude within -180 to 180</span>
<span class="sd">                             (or 0 to 360), ERDDAP will only find datasets that match the values </span>
<span class="sd">                             you specify. Consider doing one search: longitude -180 to 360, or </span>
<span class="sd">                             two searches: longitude -180 to 180, and 0 to 360.</span>

<span class="sd">        `minLat`, `maxLat` : Set latitude bounds, range -90 to 90 </span>

<span class="sd">        `minTime`, `maxTime` : Your can pass a &lt;datetime&gt; object or a string with the following</span>
<span class="sd">                               specifications</span>

<span class="sd">        &gt; </span>
<span class="sd">        - A time string with the format yyyy-MM-ddTHH:mm:ssZ,    </span>
<span class="sd">          for example, 2009-01-21T23:00:00Z.  If you specify something, you must include yyyy-MM-dd.   </span>
<span class="sd">          You can omit (backwards from the end) Z, :ss, :mm, :HH, and T.   </span>
<span class="sd">          Always use UTC (GMT/Zulu) time.   </span>
<span class="sd">        - Or specify the number of seconds since 1970-01-01T00:00:00Z.                                  </span>
<span class="sd">        - Or specify &quot;now-nUnits&quot;, for example, &quot;now-7days&quot;        </span>

<span class="sd">        `itemsPerPage` : Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page`         : If the number of results is bigger than the &quot;`itemsPerPage`&quot; you can</span>
<span class="sd">                         specify the page of results. (Default: 1)</span>

<span class="sd">        The search will find datasets that have some data within the specified </span>
<span class="sd">        time bounds.</span>

<span class="sd">        Returns the string url for the search service.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">searchAPIEndpoint</span> <span class="o">=</span> <span class="s2">&quot;search/advanced.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
        <span class="n">searchAPIURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">searchAPIEndpoint</span> <span class="p">)</span>

        <span class="n">queryElementsDefaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;page&#39;</span>          <span class="p">:</span> <span class="mi">1</span> <span class="p">,</span>
                                  <span class="s1">&#39;itemsPerPage&#39;</span>  <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                                  <span class="s1">&#39;searchFor&#39;</span>     <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;protocol&#39;</span>      <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;cdm_data_type&#39;</span> <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;institution&#39;</span>   <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;ioos_category&#39;</span> <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;keywords&#39;</span>      <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;long_name&#39;</span>     <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;standard_name&#39;</span> <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;variableName&#39;</span>  <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;maxLat&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;minLon&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;maxLon&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;minLat&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;minTime&#39;</span>       <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;maxTime&#39;</span>       <span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">queryURL</span><span class="o">=</span><span class="p">[]</span>

        <span class="k">for</span> <span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span> <span class="ow">in</span> <span class="n">queryElementsDefaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        
            <span class="n">queryValue</span> <span class="o">=</span> <span class="n">searchFilters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">queryElement</span> <span class="o">==</span> <span class="s1">&#39;searchFor&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">queryValue</span><span class="p">:</span>
                    <span class="n">queryValue</span> <span class="o">=</span> <span class="n">quote_plus</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">continue</span>
 
            <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="p">)</span>      
            <span class="k">elif</span> <span class="n">queryElement</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;minTime&#39;</span><span class="p">,</span> <span class="s1">&#39;maxTime&#39;</span><span class="p">]:</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="n">parseConstraintDateTime</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> 
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">searchAPIURL</span><span class="p">,</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="n">queryURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=+-&amp;&#39;</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">getQueryAllDatasetsURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">constraints</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method returns a string URL with the allDatasets default </span>
<span class="sd">        Tabledap Dataset from ERDDAP. </span>

<span class="sd">        Arguments:</span>

<span class="sd">        `filetype` : The result format for the request</span>

<span class="sd">        `constraints` : The request constraints list</span>
<span class="sd">        </span>
<span class="sd">        Returns a url string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALLDATASETS_VARIABLES</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tabledapAllDatasets</span><span class="o">.</span><span class="n">setResultVariables</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">)</span>
                                    <span class="o">.</span><span class="n">setConstraints</span><span class="p">(</span><span class="n">constraints</span><span class="p">)</span>
                                    <span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">statusPageURL</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      Returns the status.html url for the current ERDDAP Server reference.</span>
<span class="sd">      &quot;&quot;&quot;</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__statusPageURL&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__statusPageURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="s1">&#39;status.html&#39;</span><span class="p">)</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__statusPageURL</span>

    <span class="k">def</span> <span class="nf">parseStatusPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
      <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      This method will load the status.html page of the current ERRDAP server reference </span>
<span class="sd">      this data is parsed into a OrderedDict, with the scalars, and DataFrames with the</span>
<span class="sd">      tables provided in status.html page.</span>
<span class="sd">      The data will be available in the `erddapClient.ERDDAP_Server.statusValues` </span>
<span class="sd">      property</span>

<span class="sd">      Parameters:</span>

<span class="sd">      `force` : Data is stored in a class property, if force is True, the data will be </span>
<span class="sd">                reloaded, if False, the last loaded data is returned.</span>
<span class="sd">                </span>
<span class="sd">      &quot;&quot;&quot;</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__status_values</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">statusPageCode</span> <span class="o">=</span> <span class="n">urlread</span><span class="o">.</span><span class="n">__wrapped__</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusPageURL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__status_values</span> <span class="o">=</span> <span class="n">parseERDDAPStatusPage</span><span class="p">(</span><span class="n">statusPageCode</span><span class="p">,</span> <span class="n">numversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">version_numeric</span><span class="p">)</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">statusValues</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      Returns a OrderedDict with the parsed data of the status.html page.</span>
<span class="sd">      More information on the data provided in status.html: </span>
<span class="sd">      [ERDDAP documentaiton](https://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#monitoring)</span>
<span class="sd">      &quot;&quot;&quot;</span>      
      <span class="bp">self</span><span class="o">.</span><span class="n">parseStatusPage</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__status_values</span>
</pre></div>

        </details>

            <div class="docstring"><p>Class with the representation and methods to access a ERDDAP server.</p>
</div>


                            <div id="ERDDAP_Server.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Server.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ERDDAP_Server</span><span class="signature">(url, auth=None, lazyload=True)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs a ERDDAP Server object </span>
<span class="sd">        ...</span>
<span class="sd">        Arguments:</span>

<span class="sd">        `url`  : The ERDDAP Server URL </span>

<span class="sd">        `auth` : Tupple with username and password, to access a protected ERDDAP Server</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span> <span class="o">=</span> <span class="n">url</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="n">auth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabledapAllDatasets</span> <span class="o">=</span> <span class="n">ERDDAP_Dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="s1">&#39;allDatasets&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth</span><span class="p">)</span>
        <span class="sd">&quot;&quot;&quot; An `erddapClient.ERDDAP_Tabledap` object with the reference to the &quot;allDatasets&quot; </span>
<span class="sd">            Dataset, [About allDatasets](https://coastwatch.pfeg.noaa.gov/erddap/download/setupDatasetsXml.html#EDDTableFromAllDatasets) &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__status_values</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Constructs a ERDDAP Server object 
...
Arguments:</p>

<p><code>url</code>  : The ERDDAP Server URL </p>

<p><code>auth</code> : Tupple with username and password, to access a protected ERDDAP Server</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.ALLDATASETS_VARIABLES" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Server.ALLDATASETS_VARIABLES">#&nbsp;&nbsp</a>

        <span class="name">ALLDATASETS_VARIABLES</span><span class="default_value"> = [&#39;datasetID&#39;, &#39;accessible&#39;, &#39;institution&#39;, &#39;dataStructure&#39;, &#39;cdm_data_type&#39;, &#39;class&#39;, &#39;title&#39;, &#39;minLongitude&#39;, &#39;maxLongitude&#39;, &#39;longitudeSpacing&#39;, &#39;minLatitude&#39;, &#39;maxLatitude&#39;, &#39;latitudeSpacing&#39;, &#39;minAltitude&#39;, &#39;maxAltitude&#39;, &#39;minTime&#39;, &#39;maxTime&#39;, &#39;timeSpacing&#39;, &#39;griddap&#39;, &#39;subset&#39;, &#39;tabledap&#39;, &#39;MakeAGraph&#39;, &#39;sos&#39;, &#39;wcs&#39;, &#39;wms&#39;, &#39;files&#39;, &#39;fgdc&#39;, &#39;iso19115&#39;, &#39;metadata&#39;, &#39;sourceUrl&#39;, &#39;infoUrl&#39;, &#39;rss&#39;, &#39;email&#39;, &#39;testOutOfDate&#39;, &#39;outOfDate&#39;, &#39;summary&#39;]</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Server.tabledapAllDatasets" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Server.tabledapAllDatasets">#&nbsp;&nbsp</a>

        <span class="name">tabledapAllDatasets</span>
    </div>

            <div class="docstring"><p>An <code><a href="#ERDDAP_Tabledap">erddapClient.ERDDAP_Tabledap</a></code> object with the reference to the "allDatasets" 
Dataset, <a href="https://coastwatch.pfeg.noaa.gov/erddap/download/setupDatasetsXml.html#EDDTableFromAllDatasets">About allDatasets</a></p>
</div>


                            </div>
                            <div id="ERDDAP_Server.version_numeric" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Server.version_numeric">#&nbsp;&nbsp</a>

        <span class="name">version_numeric</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Server.version" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Server.version">#&nbsp;&nbsp</a>

        <span class="name">version</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Server.version_string" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Server.version_string">#&nbsp;&nbsp</a>

        <span class="name">version_string</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Server.search" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Server.search">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">search</span><span class="signature">(self, **filters)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">filters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a search request to the ERDDAP Server</span>

<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor` :</span>

<span class="sd">        * This is a Google-like search of the datasets metadata:</span>
<span class="sd">          Type the words you want to search for, with spaces between </span>
<span class="sd">          the words.  ERDDAP will search for the words separately, </span>
<span class="sd">          not as a phrase. </span>
<span class="sd">        * To search for a phrase, put double quotes around the </span>
<span class="sd">          phrase (for example, &quot;wind speed&quot;). </span>
<span class="sd">          To exclude datasets with a specific word, use </span>
<span class="sd">          -excludedWord To exclude datasets with a specific </span>
<span class="sd">          phrase, use -&quot;excluded phrase&quot;. </span>
<span class="sd">        * Don&#39;t use AND between search terms. It is implied. The </span>
<span class="sd">          results will include only the datasets that have all of </span>
<span class="sd">          the specified words and phrases (and none of the excluded </span>
<span class="sd">          words and phrases) in the dataset&#39;s metadata (data about </span>
<span class="sd">          the dataset). </span>
<span class="sd">        * Searches are not case-sensitive. </span>
<span class="sd">        * To search for specific attribute values, use </span>
<span class="sd">          attName=attValue . </span>
<span class="sd">        * To find just grid or just table datasets, include </span>
<span class="sd">          protocol=griddap or protocol=tabledap in your search. </span>
<span class="sd">        * This ERDDAP is using searchEngine=original. </span>
<span class="sd">        * In this ERDDAP, you can search for any part of a word. </span>
<span class="sd">        * For example, searching for spee will find datasets with </span>
<span class="sd">          speed and datasets with WindSpeed. </span>
<span class="sd">        * In this ERDDAP, the last word in a phrase may be a partial </span>
<span class="sd">          word. For example, to find datasets from a specific website </span>
<span class="sd">          (usually the start of the datasetID), include (for example) </span>
<span class="sd">          &quot;datasetID=erd&quot; in your search.</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `itemsPerPage` : Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page` : If the number of results is bigger than the &quot;`itemsPerPage`&quot; you can</span>
<span class="sd">                specify the page of results. (Default: 1)</span>

<span class="sd">        Returns a `erddapClient.ERDDAP_SearchResults` object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">searchURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSearchURL</span><span class="p">(</span> <span class="o">**</span><span class="n">filters</span><span class="p">)</span>
        <span class="n">rawSearchResults</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="n">searchURL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span>
        <span class="n">dictSearchResult</span> <span class="o">=</span> <span class="n">rawSearchResults</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">formatedResults</span> <span class="o">=</span> <span class="n">ERDDAP_SearchResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">dictSearchResult</span><span class="p">[</span><span class="s1">&#39;table&#39;</span><span class="p">][</span><span class="s1">&#39;rows&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">formatedResults</span>
</pre></div>

        </details>

            <div class="docstring"><p>Makes a search request to the ERDDAP Server</p>

<p>Search filters kwargs:</p>

<p><code>searchFor</code> :</p>

<ul>
<li>This is a Google-like search of the datasets metadata:
Type the words you want to search for, with spaces between 
the words.  ERDDAP will search for the words separately, 
not as a phrase. </li>
<li>To search for a phrase, put double quotes around the 
phrase (for example, "wind speed"). 
To exclude datasets with a specific word, use 
-excludedWord To exclude datasets with a specific 
phrase, use -"excluded phrase". </li>
<li>Don't use AND between search terms. It is implied. The 
results will include only the datasets that have all of 
the specified words and phrases (and none of the excluded 
words and phrases) in the dataset's metadata (data about 
the dataset). </li>
<li>Searches are not case-sensitive. </li>
<li>To search for specific attribute values, use 
attName=attValue . </li>
<li>To find just grid or just table datasets, include 
protocol=griddap or protocol=tabledap in your search. </li>
<li>This ERDDAP is using searchEngine=original. </li>
<li>In this ERDDAP, you can search for any part of a word. </li>
<li>For example, searching for spee will find datasets with 
speed and datasets with WindSpeed. </li>
<li>In this ERDDAP, the last word in a phrase may be a partial 
word. For example, to find datasets from a specific website 
(usually the start of the datasetID), include (for example) 
"datasetID=erd" in your search.</li>
</ul>

<p>Optional filters:</p>

<p><code>itemsPerPage</code> : Set the maximum number of results. (Default: 1000)</p>

<p><code>page</code> : If the number of results is bigger than the "<code>itemsPerPage</code>" you can
        specify the page of results. (Default: 1)</p>

<p>Returns a <code><a href="#ERDDAP_SearchResults">erddapClient.ERDDAP_SearchResults</a></code> object</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.getSearchURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Server.getSearchURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getSearchURL</span><span class="signature">(self, filetype=&#39;json&#39;, **searchFilters)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">getSearchURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">searchFilters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds the url call for the basic Search ERDDAP API Rest service.</span>

<span class="sd">        Arguments</span>

<span class="sd">        `filetype` :  The result format (htmlTable, csv, json, tsv, etc) </span>
<span class="sd">                      [https://coastwatch.pfeg.noaa.gov/erddap/rest.html#responses](https://coastwatch.pfeg.noaa.gov/erddap/rest.html#responses)</span>


<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor`        </span>

<span class="sd">        * This is a Google-like search of the datasets metadata:</span>
<span class="sd">          Type the words you want to search for, with spaces between </span>
<span class="sd">          the words.  ERDDAP will search for the words separately, </span>
<span class="sd">          not as a phrase. </span>
<span class="sd">        * To search for a phrase, put double quotes around the </span>
<span class="sd">          phrase (for example, &quot;wind speed&quot;). </span>
<span class="sd">          To exclude datasets with a specific word, use </span>
<span class="sd">          -excludedWord To exclude datasets with a specific </span>
<span class="sd">          phrase, use -&quot;excluded phrase&quot;. </span>
<span class="sd">        * Don&#39;t use AND between search terms. It is implied. The </span>
<span class="sd">          results will include only the datasets that have all of </span>
<span class="sd">          the specified words and phrases (and none of the excluded </span>
<span class="sd">          words and phrases) in the dataset&#39;s metadata (data about </span>
<span class="sd">          the dataset). </span>
<span class="sd">        * Searches are not case-sensitive. </span>
<span class="sd">        * To search for specific attribute values, use </span>
<span class="sd">          attName=attValue . </span>
<span class="sd">        * To find just grid or just table datasets, include </span>
<span class="sd">          protocol=griddap or protocol=tabledap in your search. </span>
<span class="sd">        * This ERDDAP is using searchEngine=original. </span>
<span class="sd">        * In this ERDDAP, you can search for any part of a word. </span>
<span class="sd">        * For example, searching for spee will find datasets with </span>
<span class="sd">          speed and datasets with WindSpeed. </span>
<span class="sd">        * In this ERDDAP, the last word in a phrase may be a partial </span>
<span class="sd">          word. For example, to find datasets from a specific website </span>
<span class="sd">          (usually the start of the datasetID), include (for example) </span>
<span class="sd">          &quot;datasetID=erd&quot; in your search.</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `itemsPerPage` :  Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page` : If the number of results is bigger than the &quot;itemsPerPage&quot; you can</span>
<span class="sd">                 specify the page of results. (Default: 1)           </span>

<span class="sd">        Returns a string with the url search request.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">searchAPIEndpoint</span> <span class="o">=</span> <span class="s2">&quot;search/index.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
        <span class="n">searchAPIURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">searchAPIEndpoint</span> <span class="p">)</span> 

        <span class="n">queryElementsDefaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;page&#39;</span>          <span class="p">:</span> <span class="mi">1</span> <span class="p">,</span>
                                  <span class="s1">&#39;itemsPerPage&#39;</span>  <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                                  <span class="s1">&#39;searchFor&#39;</span>     <span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">queryURL</span><span class="o">=</span><span class="p">[]</span>

        <span class="k">for</span> <span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span> <span class="ow">in</span> <span class="n">queryElementsDefaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>                      
            
            <span class="n">queryValue</span> <span class="o">=</span> <span class="n">searchFilters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">queryElement</span> <span class="o">==</span> <span class="s1">&#39;searchFor&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">queryValue</span><span class="p">:</span>
                    <span class="n">queryValue</span> <span class="o">=</span> <span class="n">quote_plus</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">continue</span>
 
            <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span> 
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">searchAPIURL</span><span class="p">,</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="n">queryURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=+-&amp;&#39;</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Builds the url call for the basic Search ERDDAP API Rest service.</p>

<p>Arguments</p>

<p><code>filetype</code> :  The result format (htmlTable, csv, json, tsv, etc) 
              <a href="https://coastwatch.pfeg.noaa.gov/erddap/rest.html#responses">https://coastwatch.pfeg.noaa.gov/erddap/rest.html#responses</a></p>

<p>Search filters kwargs:</p>

<p><code>searchFor</code>        </p>

<ul>
<li>This is a Google-like search of the datasets metadata:
Type the words you want to search for, with spaces between 
the words.  ERDDAP will search for the words separately, 
not as a phrase. </li>
<li>To search for a phrase, put double quotes around the 
phrase (for example, "wind speed"). 
To exclude datasets with a specific word, use 
-excludedWord To exclude datasets with a specific 
phrase, use -"excluded phrase". </li>
<li>Don't use AND between search terms. It is implied. The 
results will include only the datasets that have all of 
the specified words and phrases (and none of the excluded 
words and phrases) in the dataset's metadata (data about 
the dataset). </li>
<li>Searches are not case-sensitive. </li>
<li>To search for specific attribute values, use 
attName=attValue . </li>
<li>To find just grid or just table datasets, include 
protocol=griddap or protocol=tabledap in your search. </li>
<li>This ERDDAP is using searchEngine=original. </li>
<li>In this ERDDAP, you can search for any part of a word. </li>
<li>For example, searching for spee will find datasets with 
speed and datasets with WindSpeed. </li>
<li>In this ERDDAP, the last word in a phrase may be a partial 
word. For example, to find datasets from a specific website 
(usually the start of the datasetID), include (for example) 
"datasetID=erd" in your search.</li>
</ul>

<p>Optional filters:</p>

<p><code>itemsPerPage</code> :  Set the maximum number of results. (Default: 1000)</p>

<p><code>page</code> : If the number of results is bigger than the "itemsPerPage" you can
         specify the page of results. (Default: 1)           </p>

<p>Returns a string with the url search request.</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.advancedSearch" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Server.advancedSearch">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">advancedSearch</span><span class="signature">(self, **filters)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">advancedSearch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">filters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Makes a advancedSearch request to the ERDDAP Server</span>

<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor` : This is a Google-like search of the datasets metadata, set the words you </span>
<span class="sd">                      want to search for  with spaces between the words.  ERDDAP will search </span>
<span class="sd">                      for the words separately, not as a phrase. </span>
<span class="sd">                      To search for a phrase, put double quotes around the phrase (for </span>
<span class="sd">                      example, &quot;wind speed&quot;). </span>
<span class="sd">                      To exclude datasets with a specific word, use -excludedWord. </span>
<span class="sd">                      To exclude datasets with a specific phrase, use -&quot;excluded phrase&quot; </span>
<span class="sd">                      To search for specific attribute values, use attName=attValue</span>
<span class="sd">                      To find just grid or table datasets, include protocol=griddap </span>
<span class="sd">                      or protocol=tabledap</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `protocolol`    : Set either: griddap, tabledap or wms (Default: (ANY))</span>

<span class="sd">        `cdm_data_type` : Set either: grid, timeseries, point, timeseriesProfile, trajectory</span>
<span class="sd">                          trajectoryProfile, etc.. (Default: (ANY))</span>

<span class="sd">        `institution`   : Set either to one of the available instituion values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `ioos_category` : Set either to one of the available ioos_category values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `keywords`      : Set either to one of the available keywords values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `long_name`     : Set either to one of the available long_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `standard_name` : Set either to one of the available standard_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `variableName`  : Set either to one of the available variable names values in the </span>
<span class="sd">                          ERDDAP (Default: (ANY))</span>
<span class="sd">          </span>
<span class="sd">        `minLon`, `maxLon` : Some datasets have longitude values within -180 to 180, others </span>
<span class="sd">                             use 0 to 360. If you specify Min and Max Longitude within -180 to 180</span>
<span class="sd">                             (or 0 to 360), ERDDAP will only find datasets that match the values </span>
<span class="sd">                             you specify. Consider doing one search: longitude -180 to 360, or </span>
<span class="sd">                             two searches: longitude -180 to 180, and 0 to 360.</span>

<span class="sd">        `minLat`, `maxLat` : Set latitude bounds, range -90 to 90 </span>

<span class="sd">        `minTime`, `maxTime` : Your can pass a &lt;datetime&gt; object or a string with the following</span>
<span class="sd">                               specifications</span>

<span class="sd">        &gt; </span>
<span class="sd">        - A time string with the format yyyy-MM-ddTHH:mm:ssZ,    </span>
<span class="sd">          for example, 2009-01-21T23:00:00Z.  If you specify something, you must include yyyy-MM-dd.   </span>
<span class="sd">          You can omit (backwards from the end) Z, :ss, :mm, :HH, and T.   </span>
<span class="sd">          Always use UTC (GMT/Zulu) time.   </span>
<span class="sd">        - Or specify the number of seconds since 1970-01-01T00:00:00Z.                                  </span>
<span class="sd">        - Or specify &quot;now-nUnits&quot;, for example, &quot;now-7days&quot;        </span>

<span class="sd">        `itemsPerPage` : Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page`         : If the number of results is bigger than the &quot;`itemsPerPage`&quot; you can</span>
<span class="sd">                         specify the page of results. (Default: 1)</span>

<span class="sd">        The search will find datasets that have some data within the specified </span>
<span class="sd">        time bounds.</span>

<span class="sd">        Returns a `erddapClient.ERDDAP_SearchResults` object</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">searchURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAdvancedSearchURL</span><span class="p">(</span> <span class="o">**</span><span class="n">filters</span><span class="p">)</span>
        <span class="n">rawSearchResults</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="n">searchURL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span>
        <span class="n">dictSearchResult</span> <span class="o">=</span> <span class="n">rawSearchResults</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="n">formatedResults</span> <span class="o">=</span> <span class="n">ERDDAP_SearchResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">dictSearchResult</span><span class="p">[</span><span class="s1">&#39;table&#39;</span><span class="p">][</span><span class="s1">&#39;rows&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">formatedResults</span>
</pre></div>

        </details>

            <div class="docstring"><p>Makes a advancedSearch request to the ERDDAP Server</p>

<p>Search filters kwargs:</p>

<p><code>searchFor</code> : This is a Google-like search of the datasets metadata, set the words you 
              want to search for  with spaces between the words.  ERDDAP will search 
              for the words separately, not as a phrase. 
              To search for a phrase, put double quotes around the phrase (for 
              example, "wind speed"). 
              To exclude datasets with a specific word, use -excludedWord. 
              To exclude datasets with a specific phrase, use -"excluded phrase" 
              To search for specific attribute values, use attName=attValue
              To find just grid or table datasets, include protocol=griddap 
              or protocol=tabledap</p>

<p>Optional filters:</p>

<p><code>protocolol</code>    : Set either: griddap, tabledap or wms (Default: (ANY))</p>

<p><code>cdm_data_type</code> : Set either: grid, timeseries, point, timeseriesProfile, trajectory
                  trajectoryProfile, etc.. (Default: (ANY))</p>

<p><code>institution</code>   : Set either to one of the available instituion values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>ioos_category</code> : Set either to one of the available ioos_category values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>keywords</code>      : Set either to one of the available keywords values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>long_name</code>     : Set either to one of the available long_name values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>standard_name</code> : Set either to one of the available standard_name values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>variableName</code>  : Set either to one of the available variable names values in the 
                  ERDDAP (Default: (ANY))</p>

<p><code>minLon</code>, <code>maxLon</code> : Some datasets have longitude values within -180 to 180, others 
                     use 0 to 360. If you specify Min and Max Longitude within -180 to 180
                     (or 0 to 360), ERDDAP will only find datasets that match the values 
                     you specify. Consider doing one search: longitude -180 to 360, or 
                     two searches: longitude -180 to 180, and 0 to 360.</p>

<p><code>minLat</code>, <code>maxLat</code> : Set latitude bounds, range -90 to 90 </p>

<p><code>minTime</code>, <code>maxTime</code> : Your can pass a <datetime> object or a string with the following
                       specifications</p>

<blockquote>
  <ul>
  <li>A time string with the format yyyy-MM-ddTHH:mm:ssZ, <br />
  for example, 2009-01-21T23:00:00Z.  If you specify something, you must include yyyy-MM-dd. <br />
  You can omit (backwards from the end) Z, :ss, :mm, :HH, and T. <br />
  Always use UTC (GMT/Zulu) time.   </li>
  <li>Or specify the number of seconds since 1970-01-01T00:00:00Z.                                  </li>
  <li>Or specify "now-nUnits", for example, "now-7days"        </li>
  </ul>
</blockquote>

<p><code>itemsPerPage</code> : Set the maximum number of results. (Default: 1000)</p>

<p><code>page</code>         : If the number of results is bigger than the "<code>itemsPerPage</code>" you can
                 specify the page of results. (Default: 1)</p>

<p>The search will find datasets that have some data within the specified 
time bounds.</p>

<p>Returns a <code><a href="#ERDDAP_SearchResults">erddapClient.ERDDAP_SearchResults</a></code> object</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.getAdvancedSearchURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Server.getAdvancedSearchURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getAdvancedSearchURL</span><span class="signature">(self, filetype=&#39;json&#39;, **searchFilters)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">getAdvancedSearchURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">searchFilters</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Builds the url call for the advanced Search ERDDAP API Rest service.</span>

<span class="sd">        Search filters kwargs:</span>

<span class="sd">        `searchFor` : This is a Google-like search of the datasets metadata, set the words you </span>
<span class="sd">                      want to search for  with spaces between the words.  ERDDAP will search </span>
<span class="sd">                      for the words separately, not as a phrase. </span>
<span class="sd">                      To search for a phrase, put double quotes around the phrase (for </span>
<span class="sd">                      example, &quot;wind speed&quot;). </span>
<span class="sd">                      To exclude datasets with a specific word, use -excludedWord. </span>
<span class="sd">                      To exclude datasets with a specific phrase, use -&quot;excluded phrase&quot; </span>
<span class="sd">                      To search for specific attribute values, use attName=attValue</span>
<span class="sd">                      To find just grid or table datasets, include protocol=griddap </span>
<span class="sd">                      or protocol=tabledap</span>

<span class="sd">        Optional filters:</span>

<span class="sd">        `protocolol`    : Set either: griddap, tabledap or wms (Default: (ANY))</span>

<span class="sd">        `cdm_data_type` : Set either: grid, timeseries, point, timeseriesProfile, trajectory</span>
<span class="sd">                          trajectoryProfile, etc.. (Default: (ANY))</span>

<span class="sd">        `institution`   : Set either to one of the available instituion values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `ioos_category` : Set either to one of the available ioos_category values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `keywords`      : Set either to one of the available keywords values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `long_name`     : Set either to one of the available long_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `standard_name` : Set either to one of the available standard_name values in the ERDDAP</span>
<span class="sd">                          (Default: (ANY))</span>

<span class="sd">        `variableName`  : Set either to one of the available variable names values in the </span>
<span class="sd">                          ERDDAP (Default: (ANY))</span>
<span class="sd">          </span>
<span class="sd">        `minLon`, `maxLon` : Some datasets have longitude values within -180 to 180, others </span>
<span class="sd">                             use 0 to 360. If you specify Min and Max Longitude within -180 to 180</span>
<span class="sd">                             (or 0 to 360), ERDDAP will only find datasets that match the values </span>
<span class="sd">                             you specify. Consider doing one search: longitude -180 to 360, or </span>
<span class="sd">                             two searches: longitude -180 to 180, and 0 to 360.</span>

<span class="sd">        `minLat`, `maxLat` : Set latitude bounds, range -90 to 90 </span>

<span class="sd">        `minTime`, `maxTime` : Your can pass a &lt;datetime&gt; object or a string with the following</span>
<span class="sd">                               specifications</span>

<span class="sd">        &gt; </span>
<span class="sd">        - A time string with the format yyyy-MM-ddTHH:mm:ssZ,    </span>
<span class="sd">          for example, 2009-01-21T23:00:00Z.  If you specify something, you must include yyyy-MM-dd.   </span>
<span class="sd">          You can omit (backwards from the end) Z, :ss, :mm, :HH, and T.   </span>
<span class="sd">          Always use UTC (GMT/Zulu) time.   </span>
<span class="sd">        - Or specify the number of seconds since 1970-01-01T00:00:00Z.                                  </span>
<span class="sd">        - Or specify &quot;now-nUnits&quot;, for example, &quot;now-7days&quot;        </span>

<span class="sd">        `itemsPerPage` : Set the maximum number of results. (Default: 1000)</span>

<span class="sd">        `page`         : If the number of results is bigger than the &quot;`itemsPerPage`&quot; you can</span>
<span class="sd">                         specify the page of results. (Default: 1)</span>

<span class="sd">        The search will find datasets that have some data within the specified </span>
<span class="sd">        time bounds.</span>

<span class="sd">        Returns the string url for the search service.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">searchAPIEndpoint</span> <span class="o">=</span> <span class="s2">&quot;search/advanced.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
        <span class="n">searchAPIURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">serverURL</span><span class="p">,</span> <span class="n">searchAPIEndpoint</span> <span class="p">)</span>

        <span class="n">queryElementsDefaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;page&#39;</span>          <span class="p">:</span> <span class="mi">1</span> <span class="p">,</span>
                                  <span class="s1">&#39;itemsPerPage&#39;</span>  <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
                                  <span class="s1">&#39;searchFor&#39;</span>     <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;protocol&#39;</span>      <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;cdm_data_type&#39;</span> <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;institution&#39;</span>   <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;ioos_category&#39;</span> <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;keywords&#39;</span>      <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;long_name&#39;</span>     <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;standard_name&#39;</span> <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;variableName&#39;</span>  <span class="p">:</span> <span class="s2">&quot;(ANY)&quot;</span><span class="p">,</span>
                                  <span class="s1">&#39;maxLat&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;minLon&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;maxLon&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;minLat&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;minTime&#39;</span>       <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                                  <span class="s1">&#39;maxTime&#39;</span>       <span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">queryURL</span><span class="o">=</span><span class="p">[]</span>

        <span class="k">for</span> <span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span> <span class="ow">in</span> <span class="n">queryElementsDefaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        
            <span class="n">queryValue</span> <span class="o">=</span> <span class="n">searchFilters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">queryElement</span><span class="p">,</span> <span class="n">queryElementDefault</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">queryElement</span> <span class="o">==</span> <span class="s1">&#39;searchFor&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">queryValue</span><span class="p">:</span>
                    <span class="n">queryValue</span> <span class="o">=</span> <span class="n">quote_plus</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">continue</span>
 
            <span class="k">if</span> <span class="n">queryValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="p">)</span>      
            <span class="k">elif</span> <span class="n">queryElement</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;minTime&#39;</span><span class="p">,</span> <span class="s1">&#39;maxTime&#39;</span><span class="p">]:</span>
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="n">parseConstraintDateTime</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> 
                <span class="n">queryURL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">queryElement</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">queryValue</span><span class="p">)</span> <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">searchAPIURL</span><span class="p">,</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="n">queryURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=+-&amp;&#39;</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Builds the url call for the advanced Search ERDDAP API Rest service.</p>

<p>Search filters kwargs:</p>

<p><code>searchFor</code> : This is a Google-like search of the datasets metadata, set the words you 
              want to search for  with spaces between the words.  ERDDAP will search 
              for the words separately, not as a phrase. 
              To search for a phrase, put double quotes around the phrase (for 
              example, "wind speed"). 
              To exclude datasets with a specific word, use -excludedWord. 
              To exclude datasets with a specific phrase, use -"excluded phrase" 
              To search for specific attribute values, use attName=attValue
              To find just grid or table datasets, include protocol=griddap 
              or protocol=tabledap</p>

<p>Optional filters:</p>

<p><code>protocolol</code>    : Set either: griddap, tabledap or wms (Default: (ANY))</p>

<p><code>cdm_data_type</code> : Set either: grid, timeseries, point, timeseriesProfile, trajectory
                  trajectoryProfile, etc.. (Default: (ANY))</p>

<p><code>institution</code>   : Set either to one of the available instituion values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>ioos_category</code> : Set either to one of the available ioos_category values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>keywords</code>      : Set either to one of the available keywords values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>long_name</code>     : Set either to one of the available long_name values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>standard_name</code> : Set either to one of the available standard_name values in the ERDDAP
                  (Default: (ANY))</p>

<p><code>variableName</code>  : Set either to one of the available variable names values in the 
                  ERDDAP (Default: (ANY))</p>

<p><code>minLon</code>, <code>maxLon</code> : Some datasets have longitude values within -180 to 180, others 
                     use 0 to 360. If you specify Min and Max Longitude within -180 to 180
                     (or 0 to 360), ERDDAP will only find datasets that match the values 
                     you specify. Consider doing one search: longitude -180 to 360, or 
                     two searches: longitude -180 to 180, and 0 to 360.</p>

<p><code>minLat</code>, <code>maxLat</code> : Set latitude bounds, range -90 to 90 </p>

<p><code>minTime</code>, <code>maxTime</code> : Your can pass a <datetime> object or a string with the following
                       specifications</p>

<blockquote>
  <ul>
  <li>A time string with the format yyyy-MM-ddTHH:mm:ssZ, <br />
  for example, 2009-01-21T23:00:00Z.  If you specify something, you must include yyyy-MM-dd. <br />
  You can omit (backwards from the end) Z, :ss, :mm, :HH, and T. <br />
  Always use UTC (GMT/Zulu) time.   </li>
  <li>Or specify the number of seconds since 1970-01-01T00:00:00Z.                                  </li>
  <li>Or specify "now-nUnits", for example, "now-7days"        </li>
  </ul>
</blockquote>

<p><code>itemsPerPage</code> : Set the maximum number of results. (Default: 1000)</p>

<p><code>page</code>         : If the number of results is bigger than the "<code>itemsPerPage</code>" you can
                 specify the page of results. (Default: 1)</p>

<p>The search will find datasets that have some data within the specified 
time bounds.</p>

<p>Returns the string url for the search service.</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.getQueryAllDatasetsURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Server.getQueryAllDatasetsURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getQueryAllDatasetsURL</span><span class="signature">(self, filetype=&#39;json&#39;, constraints=[])</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">getQueryAllDatasetsURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">constraints</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method returns a string URL with the allDatasets default </span>
<span class="sd">        Tabledap Dataset from ERDDAP. </span>

<span class="sd">        Arguments:</span>

<span class="sd">        `filetype` : The result format for the request</span>

<span class="sd">        `constraints` : The request constraints list</span>
<span class="sd">        </span>
<span class="sd">        Returns a url string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALLDATASETS_VARIABLES</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tabledapAllDatasets</span><span class="o">.</span><span class="n">setResultVariables</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">)</span>
                                    <span class="o">.</span><span class="n">setConstraints</span><span class="p">(</span><span class="n">constraints</span><span class="p">)</span>
                                    <span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
</pre></div>

        </details>

            <div class="docstring"><p>This method returns a string URL with the allDatasets default 
Tabledap Dataset from ERDDAP. </p>

<p>Arguments:</p>

<p><code>filetype</code> : The result format for the request</p>

<p><code>constraints</code> : The request constraints list</p>

<p>Returns a url string</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.statusPageURL" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Server.statusPageURL">#&nbsp;&nbsp</a>

        <span class="name">statusPageURL</span>
    </div>

            <div class="docstring"><p>Returns the status.html url for the current ERDDAP Server reference.</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.parseStatusPage" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Server.parseStatusPage">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">parseStatusPage</span><span class="signature">(self, force=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">parseStatusPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
      <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      This method will load the status.html page of the current ERRDAP server reference </span>
<span class="sd">      this data is parsed into a OrderedDict, with the scalars, and DataFrames with the</span>
<span class="sd">      tables provided in status.html page.</span>
<span class="sd">      The data will be available in the `erddapClient.ERDDAP_Server.statusValues` </span>
<span class="sd">      property</span>

<span class="sd">      Parameters:</span>

<span class="sd">      `force` : Data is stored in a class property, if force is True, the data will be </span>
<span class="sd">                reloaded, if False, the last loaded data is returned.</span>
<span class="sd">                </span>
<span class="sd">      &quot;&quot;&quot;</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__status_values</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">statusPageCode</span> <span class="o">=</span> <span class="n">urlread</span><span class="o">.</span><span class="n">__wrapped__</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusPageURL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__status_values</span> <span class="o">=</span> <span class="n">parseERDDAPStatusPage</span><span class="p">(</span><span class="n">statusPageCode</span><span class="p">,</span> <span class="n">numversion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">version_numeric</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This method will load the status.html page of the current ERRDAP server reference 
this data is parsed into a OrderedDict, with the scalars, and DataFrames with the
tables provided in status.html page.
The data will be available in the <code><a href="#ERDDAP_Server.statusValues">erddapClient.ERDDAP_Server.statusValues</a></code> 
property</p>

<p>Parameters:</p>

<p><code>force</code> : Data is stored in a class property, if force is True, the data will be 
          reloaded, if False, the last loaded data is returned.</p>
</div>


                            </div>
                            <div id="ERDDAP_Server.statusValues" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Server.statusValues">#&nbsp;&nbsp</a>

        <span class="name">statusValues</span>
    </div>

            <div class="docstring"><p>Returns a OrderedDict with the parsed data of the status.html page.
More information on the data provided in status.html: 
<a href="https://coastwatch.pfeg.noaa.gov/erddap/download/setup.html#monitoring">ERDDAP documentaiton</a></p>
</div>


                            </div>
                </section>
                <section id="ERDDAP_Dataset">
                                <div class="attr class">
        <a class="headerlink" href="#ERDDAP_Dataset">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ERDDAP_Dataset</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ERDDAP_Dataset</span><span class="p">:</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Class to represent the shared attributes and methods of a ERDDAP Dataset</span>
<span class="sd">  either a griddap or tabledap.</span>
<span class="sd">  </span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">DEFAULT_FILETYPE</span> <span class="o">=</span> <span class="s1">&#39;csvp&#39;</span>
  <span class="n">BINARY_FILETYPES</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;dods&#39;</span><span class="p">,</span> <span class="s1">&#39;mat&#39;</span><span class="p">,</span> <span class="s1">&#39;nc&#39;</span><span class="p">,</span> <span class="s1">&#39;ncCF&#39;</span><span class="p">,</span> <span class="s1">&#39;ncCFMA&#39;</span><span class="p">,</span> <span class="s1">&#39;wav&#39;</span><span class="p">,</span> 
                       <span class="s1">&#39;smallPdf&#39;</span><span class="p">,</span> <span class="s1">&#39;pdf&#39;</span><span class="p">,</span> <span class="s1">&#39;largePdf&#39;</span><span class="p">,</span> 
                       <span class="s1">&#39;smallPng&#39;</span><span class="p">,</span> <span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="s1">&#39;largePng&#39;</span><span class="p">,</span> <span class="s1">&#39;transparentPng&#39;</span><span class="p">]</span>

  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">erddapurl</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;tabledap&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span> <span class="o">=</span> <span class="n">erddapurl</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="o">=</span> <span class="n">datasetid</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="n">protocol</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span> <span class="o">=</span> <span class="n">auth</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">lazyload</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>


  <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">dataset_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">__simple_repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">simple_dataset_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
  

  <span class="k">def</span> <span class="nf">setResultVariables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function sets the optional comma-separated list of variables </span>
<span class="sd">    called &quot;resultsVariables&quot; as part of the query for data request.</span>
<span class="sd">    (for example: longitude,latitude,time,station,wmo_platform_code,T_25).</span>
<span class="sd">    For each variable in resultsVariables, there will be a column in the </span>
<span class="sd">    results table, in the same order. If you don&#39;t specify any results </span>
<span class="sd">    variables, the results table will include columns for all of the </span>
<span class="sd">    variables in the dataset.</span>

<span class="sd">    Arguments</span>

<span class="sd">    `variables` : The list of variables, this can be a string with the </span>
<span class="sd">                  comma separated variables, or a list.</span>
<span class="sd">    </span>
<span class="sd">    Returns the current object allowing chaining functions.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="n">variables</span> 
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="n">variables</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="p">[</span> <span class="n">rv</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">rv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;variables argument must be list, or comma separated list of variables&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="bp">self</span>


  <span class="k">def</span> <span class="nf">addResultVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a variable to the data request query element &quot;resultsVariables&quot;</span>

<span class="sd">    Arguments</span>

<span class="sd">    `variable` : A string with the variable name add.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>


  <span class="k">def</span> <span class="nf">setConstraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraintListOrDict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This functions sets the constraints for the data request query.</span>

<span class="sd">    More on ERDDAP constraints: https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#query</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearConstraints</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addConstraints</span><span class="p">(</span><span class="n">constraintListOrDict</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span> 


  <span class="k">def</span> <span class="nf">addConstraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraintListOrDict</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraintListOrDict</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">constraintListOrDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addConstraint</span><span class="p">({</span><span class="n">k</span><span class="p">:</span><span class="n">v</span><span class="p">})</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraintListOrDict</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="n">constraintListOrDict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Constraints argument must be either dictionary or list&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>


  <span class="k">def</span> <span class="nf">addConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This adds a constraint to the data request query.</span>

<span class="sd">    Arguments</span>

<span class="sd">    `constraint` : This can be a string with the constraint, or a dictionary</span>
<span class="sd">                   element, being the key the first part of the constraint, and </span>
<span class="sd">                   the dict value the constraint value.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```</span>
<span class="sd">    &gt;&gt;&gt; dataset.addConstraint(&#39;time&gt;=2020-12-29T00:00:00Z&#39;)</span>
<span class="sd">    &gt;&gt;&gt; dataset.addConstraint({ &#39;time&gt;=&#39; : dt.datetime(2020,12,29) })</span>
<span class="sd">    ```</span>

<span class="sd">    More on ERDDAP constraints: https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#query</span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_addConstraintDict</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_addConstraintStr</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;constraint argument must be either string or a dictionary&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>


  <span class="k">def</span> <span class="nf">_addConstraintStr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>


  <span class="k">def</span> <span class="nf">_addConstraintDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraintDict</span><span class="p">):</span>
    <span class="n">constraintKey</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">constraintDict</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_addConstraintStr</span><span class="p">(</span>
      <span class="s2">&quot;</span><span class="si">{key_plus_conditional}{value}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">key_plus_conditional</span><span class="o">=</span><span class="n">constraintKey</span><span class="p">,</span> 
            <span class="n">value</span><span class="o">=</span><span class="n">parseConstraintValue</span><span class="p">(</span><span class="n">constraintDict</span><span class="p">[</span><span class="n">constraintKey</span><span class="p">])</span>
          <span class="p">)</span>
    <span class="p">)</span>


  <span class="k">def</span> <span class="nf">getDataRequestURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">requestURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">item_separator</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">+</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=!()&amp;&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">+</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=!()&amp;/&#39;</span><span class="p">)</span>

    <span class="n">requestURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">requestURL</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span> <span class="o">=</span> <span class="n">requestURL</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span>
  
  
  <span class="k">def</span> <span class="nf">getURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Buils and returns a strint with the data request query, with the available</span>
<span class="sd">    resultsVariables, constraints and operations provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">)</span>


  <span class="k">def</span> <span class="nf">getBaseURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;opendap&#39;</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">filetype</span> <span class="p">)</span>
    

  <span class="k">def</span> <span class="nf">getAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">variableName</span><span class="o">=</span><span class="s1">&#39;NC_GLOBAL&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value for a attribute name in the dataset. If the metadata of the</span>
<span class="sd">    dataset is not already in memory, this functions will load it, calling the</span>
<span class="sd">    function `erddapClient.ERDDAP_Dataset.loadMetadata`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">variableName</span> <span class="o">==</span> <span class="s1">&#39;NC_GLOBAL&#39;</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">vd</span> <span class="ow">in</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;variables&#39;</span><span class="p">]</span> <span class="p">]:</span>
        <span class="k">if</span> <span class="n">variableName</span> <span class="ow">in</span> <span class="n">vd</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
          <span class="k">if</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">vd</span><span class="p">[</span><span class="n">variableName</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">vd</span><span class="p">[</span><span class="n">variableName</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span>


  <span class="k">def</span> <span class="nf">loadMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads in to memory the metadata atributes and values available in the info</span>
<span class="sd">    page of the dataset.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `force` : If true, this method will reload the metadata attributes</span>
<span class="sd">    even if the information where already downloaded.    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
      <span class="n">rawRequest</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getMetadataURL</span><span class="p">(),</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">)</span>
      <span class="n">rawRequestJson</span> <span class="o">=</span> <span class="n">rawRequest</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span> <span class="o">=</span> <span class="n">parseDictMetadata</span><span class="p">(</span><span class="n">rawRequestJson</span><span class="p">)</span>
      <span class="k">return</span> <span class="kc">True</span>
      
  <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns list of variables of this dataset, and it&#39;s associate metadata </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;variables&#39;</span><span class="p">]</span>

  <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">dimensions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of the dataset dimensions, and it&#39;s associate metadata</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">]</span>

  <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of the global metadata of this dataset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]</span>


  <span class="k">def</span> <span class="nf">getMetadataURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a string with the url to request the metadata for the dataset.</span>

<span class="sd">    Arguments</span>

<span class="sd">    `filetype` : The filetype for the metadata request, defaults to &#39;json&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span> 
    <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="p">,</span> <span class="s2">&quot;index.&quot;</span> <span class="o">+</span> <span class="n">filetype</span> <span class="p">)</span>


  <span class="k">def</span> <span class="nf">clearConstraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears from the constrains stack all the constraints provided by the </span>
<span class="sd">    `erddapClient.ERDDAP_Dataset.setConstraints`, `erddapClient.ERDDAP_Dataset.addConstraint`</span>
<span class="sd">    methods. </span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">[]</span>
  

  <span class="k">def</span> <span class="nf">clearServerSideFunctions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears from the server side functions stack all the functions provided by the </span>
<span class="sd">    methods available, like `erddapClient.ERDDAP_Tabledap.orderBy`, </span>
<span class="sd">    `erddapClient.ERDDAP_Tabledap.orderByClosest`, etc.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span> <span class="o">=</span> <span class="p">[]</span>
  

  <span class="k">def</span> <span class="nf">clearResultVariables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears from the results variables stack all the variabkles provided by the </span>
<span class="sd">    `erddapClient.ERDDAP_Dataset.setResultsVariables` and </span>
<span class="sd">    `erddapClient.ERDDAP_Dataset.addResultVariable` methods</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>       
    <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="p">[]</span>


  <span class="k">def</span> <span class="nf">clearQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears all the query elements of the stack, variables, constraints and</span>
<span class="sd">    server side variables.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearConstraints</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearServerSideFunctions</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearResultVariables</span><span class="p">()</span>


  <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">request_kwargs</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes a data request to the ERDDAP server, the request url is build</span>
<span class="sd">    using the `erddapClient.ERDDAP_Dataset.getURL` function. </span>

<span class="sd">    Aditional request arguments for the urlread function can be provided</span>
<span class="sd">    as kwargs in this function.</span>

<span class="sd">    Returns either a string or a binary format (`erddapClient.ERDDAP_Dataset.BINARY_FILETYPES`) </span>
<span class="sd">    depending on the filetype specified in the query.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rawRequest</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">),</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">,</span> <span class="o">**</span><span class="n">request_kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filetype</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">BINARY_FILETYPES</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">rawRequest</span><span class="o">.</span><span class="n">content</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">rawRequest</span><span class="o">.</span><span class="n">text</span>

  <span class="k">def</span> <span class="nf">getDataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method makes a data request to the ERDDAP server in csv format</span>
<span class="sd">    then convert it to a pandas object. </span>
<span class="sd">    </span>
<span class="sd">    The pandas object is created using the read_csv method, and </span>
<span class="sd">    additional arguments for this method can be provided as kwargs in this</span>
<span class="sd">    method.</span>

<span class="sd">    Returns the pandas DataFrame object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">csvpdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="s1">&#39;csvp&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">request_kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">csvpdata</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Class to represent the shared attributes and methods of a ERDDAP Dataset
either a griddap or tabledap.</p>
</div>


                            <div id="ERDDAP_Dataset.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ERDDAP_Dataset</span><span class="signature">(erddapurl, datasetid, protocol=&#39;tabledap&#39;, auth=None, lazyload=True)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">erddapurl</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s1">&#39;tabledap&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span> <span class="o">=</span> <span class="n">erddapurl</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="o">=</span> <span class="n">datasetid</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="n">protocol</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span> <span class="o">=</span> <span class="n">auth</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">lazyload</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="ERDDAP_Dataset.DEFAULT_FILETYPE" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Dataset.DEFAULT_FILETYPE">#&nbsp;&nbsp</a>

        <span class="name">DEFAULT_FILETYPE</span><span class="default_value"> = &#39;csvp&#39;</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Dataset.BINARY_FILETYPES" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Dataset.BINARY_FILETYPES">#&nbsp;&nbsp</a>

        <span class="name">BINARY_FILETYPES</span><span class="default_value"> = [&#39;dods&#39;, &#39;mat&#39;, &#39;nc&#39;, &#39;ncCF&#39;, &#39;ncCFMA&#39;, &#39;wav&#39;, &#39;smallPdf&#39;, &#39;pdf&#39;, &#39;largePdf&#39;, &#39;smallPng&#39;, &#39;png&#39;, &#39;largePng&#39;, &#39;transparentPng&#39;]</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Dataset.setResultVariables" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.setResultVariables">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">setResultVariables</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">setResultVariables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function sets the optional comma-separated list of variables </span>
<span class="sd">    called &quot;resultsVariables&quot; as part of the query for data request.</span>
<span class="sd">    (for example: longitude,latitude,time,station,wmo_platform_code,T_25).</span>
<span class="sd">    For each variable in resultsVariables, there will be a column in the </span>
<span class="sd">    results table, in the same order. If you don&#39;t specify any results </span>
<span class="sd">    variables, the results table will include columns for all of the </span>
<span class="sd">    variables in the dataset.</span>

<span class="sd">    Arguments</span>

<span class="sd">    `variables` : The list of variables, this can be a string with the </span>
<span class="sd">                  comma separated variables, or a list.</span>
<span class="sd">    </span>
<span class="sd">    Returns the current object allowing chaining functions.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="n">variables</span> 
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="n">variables</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="p">[</span> <span class="n">rv</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">rv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;variables argument must be list, or comma separated list of variables&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>This function sets the optional comma-separated list of variables 
called "resultsVariables" as part of the query for data request.
(for example: longitude,latitude,time,station,wmo_platform_code,T_25).
For each variable in resultsVariables, there will be a column in the 
results table, in the same order. If you don't specify any results 
variables, the results table will include columns for all of the 
variables in the dataset.</p>

<p>Arguments</p>

<p><code><a href="#ERDDAP_Dataset.variables">variables</a></code> : The list of variables, this can be a string with the 
              comma separated variables, or a list.</p>

<p>Returns the current object allowing chaining functions.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.addResultVariable" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.addResultVariable">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">addResultVariable</span><span class="signature">(self, variable)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">addResultVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a variable to the data request query element &quot;resultsVariables&quot;</span>

<span class="sd">    Arguments</span>

<span class="sd">    `variable` : A string with the variable name add.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>Adds a variable to the data request query element "resultsVariables"</p>

<p>Arguments</p>

<p><code>variable</code> : A string with the variable name add.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.setConstraints" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.setConstraints">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">setConstraints</span><span class="signature">(self, constraintListOrDict)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">setConstraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraintListOrDict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This functions sets the constraints for the data request query.</span>

<span class="sd">    More on ERDDAP constraints: https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#query</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearConstraints</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addConstraints</span><span class="p">(</span><span class="n">constraintListOrDict</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span> 
</pre></div>

        </details>

            <div class="docstring"><p>This functions sets the constraints for the data request query.</p>

<p>More on ERDDAP constraints: https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#query</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.addConstraints" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.addConstraints">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">addConstraints</span><span class="signature">(self, constraintListOrDict)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">addConstraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraintListOrDict</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraintListOrDict</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">constraintListOrDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addConstraint</span><span class="p">({</span><span class="n">k</span><span class="p">:</span><span class="n">v</span><span class="p">})</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraintListOrDict</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="n">constraintListOrDict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Constraints argument must be either dictionary or list&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="ERDDAP_Dataset.addConstraint" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.addConstraint">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">addConstraint</span><span class="signature">(self, constraint)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">addConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This adds a constraint to the data request query.</span>

<span class="sd">    Arguments</span>

<span class="sd">    `constraint` : This can be a string with the constraint, or a dictionary</span>
<span class="sd">                   element, being the key the first part of the constraint, and </span>
<span class="sd">                   the dict value the constraint value.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```</span>
<span class="sd">    &gt;&gt;&gt; dataset.addConstraint(&#39;time&gt;=2020-12-29T00:00:00Z&#39;)</span>
<span class="sd">    &gt;&gt;&gt; dataset.addConstraint({ &#39;time&gt;=&#39; : dt.datetime(2020,12,29) })</span>
<span class="sd">    ```</span>

<span class="sd">    More on ERDDAP constraints: https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#query</span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_addConstraintDict</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constraint</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_addConstraintStr</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;constraint argument must be either string or a dictionary&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>This adds a constraint to the data request query.</p>

<p>Arguments</p>

<p><code>constraint</code> : This can be a string with the constraint, or a dictionary
               element, being the key the first part of the constraint, and 
               the dict value the constraint value.</p>

<p>Example:</p>

<pre><code>&gt;&gt;&gt; dataset.addConstraint('time&gt;=2020-12-29T00:00:00Z')
&gt;&gt;&gt; dataset.addConstraint({ 'time&gt;=' : dt.datetime(2020,12,29) })
</code></pre>

<p>More on ERDDAP constraints: https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#query</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.getDataRequestURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.getDataRequestURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getDataRequestURL</span><span class="signature">(self, filetype=&#39;csvp&#39;, useSafeURL=True)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getDataRequestURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">requestURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">item_separator</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">+</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constraints</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=!()&amp;&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">+</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;=!()&amp;/&#39;</span><span class="p">)</span>

    <span class="n">requestURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">requestURL</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span> <span class="o">=</span> <span class="n">requestURL</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="ERDDAP_Dataset.getURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.getURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getURL</span><span class="signature">(self, filetype=&#39;csvp&#39;, useSafeURL=True)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Buils and returns a strint with the data request query, with the available</span>
<span class="sd">    resultsVariables, constraints and operations provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Buils and returns a strint with the data request query, with the available
resultsVariables, constraints and operations provided.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.getBaseURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.getBaseURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getBaseURL</span><span class="signature">(self, filetype=&#39;csvp&#39;)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getBaseURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;opendap&#39;</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">filetype</span> <span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="ERDDAP_Dataset.getAttribute" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.getAttribute">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getAttribute</span><span class="signature">(self, attribute, variableName=&#39;NC_GLOBAL&#39;)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">variableName</span><span class="o">=</span><span class="s1">&#39;NC_GLOBAL&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value for a attribute name in the dataset. If the metadata of the</span>
<span class="sd">    dataset is not already in memory, this functions will load it, calling the</span>
<span class="sd">    function `erddapClient.ERDDAP_Dataset.loadMetadata`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">variableName</span> <span class="o">==</span> <span class="s1">&#39;NC_GLOBAL&#39;</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;global&#39;</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">vd</span> <span class="ow">in</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span><span class="p">[</span><span class="s1">&#39;variables&#39;</span><span class="p">]</span> <span class="p">]:</span>
        <span class="k">if</span> <span class="n">variableName</span> <span class="ow">in</span> <span class="n">vd</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
          <span class="k">if</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">vd</span><span class="p">[</span><span class="n">variableName</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">vd</span><span class="p">[</span><span class="n">variableName</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns the value for a attribute name in the dataset. If the metadata of the
dataset is not already in memory, this functions will load it, calling the
function <code><a href="#ERDDAP_Dataset.loadMetadata">erddapClient.ERDDAP_Dataset.loadMetadata</a></code></p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.loadMetadata" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.loadMetadata">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">loadMetadata</span><span class="signature">(self, force=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">loadMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads in to memory the metadata atributes and values available in the info</span>
<span class="sd">    page of the dataset.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `force` : If true, this method will reload the metadata attributes</span>
<span class="sd">    even if the information where already downloaded.    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
      <span class="n">rawRequest</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getMetadataURL</span><span class="p">(),</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">)</span>
      <span class="n">rawRequestJson</span> <span class="o">=</span> <span class="n">rawRequest</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">__metadata</span> <span class="o">=</span> <span class="n">parseDictMetadata</span><span class="p">(</span><span class="n">rawRequestJson</span><span class="p">)</span>
      <span class="k">return</span> <span class="kc">True</span>
</pre></div>

        </details>

            <div class="docstring"><p>Loads in to memory the metadata atributes and values available in the info
page of the dataset.</p>

<p>Arguments:</p>

<p><code>force</code> : If true, this method will reload the metadata attributes
even if the information where already downloaded.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.variables" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Dataset.variables">#&nbsp;&nbsp</a>

        <span class="name">variables</span>
    </div>

            <div class="docstring"><p>Returns list of variables of this dataset, and it's associate metadata</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.dimensions" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Dataset.dimensions">#&nbsp;&nbsp</a>

        <span class="name">dimensions</span>
    </div>

            <div class="docstring"><p>Returns a list of the dataset dimensions, and it's associate metadata</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.info" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Dataset.info">#&nbsp;&nbsp</a>

        <span class="name">info</span>
    </div>

            <div class="docstring"><p>Returns a list of the global metadata of this dataset.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.getMetadataURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.getMetadataURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getMetadataURL</span><span class="signature">(self, filetype=&#39;json&#39;)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getMetadataURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a string with the url to request the metadata for the dataset.</span>

<span class="sd">    Arguments</span>

<span class="sd">    `filetype` : The filetype for the metadata request, defaults to &#39;json&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span> 
    <span class="k">return</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">url_join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapurl</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">datasetid</span> <span class="p">,</span> <span class="s2">&quot;index.&quot;</span> <span class="o">+</span> <span class="n">filetype</span> <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns a string with the url to request the metadata for the dataset.</p>

<p>Arguments</p>

<p><code>filetype</code> : The filetype for the metadata request, defaults to 'json'</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.clearConstraints" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.clearConstraints">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">clearConstraints</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">clearConstraints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears from the constrains stack all the constraints provided by the </span>
<span class="sd">    `erddapClient.ERDDAP_Dataset.setConstraints`, `erddapClient.ERDDAP_Dataset.addConstraint`</span>
<span class="sd">    methods. </span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clears from the constrains stack all the constraints provided by the 
<code><a href="#ERDDAP_Dataset.setConstraints">erddapClient.ERDDAP_Dataset.setConstraints</a></code>, <code><a href="#ERDDAP_Dataset.addConstraint">erddapClient.ERDDAP_Dataset.addConstraint</a></code>
methods.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.clearServerSideFunctions" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.clearServerSideFunctions">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">clearServerSideFunctions</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">clearServerSideFunctions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears from the server side functions stack all the functions provided by the </span>
<span class="sd">    methods available, like `erddapClient.ERDDAP_Tabledap.orderBy`, </span>
<span class="sd">    `erddapClient.ERDDAP_Tabledap.orderByClosest`, etc.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clears from the server side functions stack all the functions provided by the 
methods available, like <code><a href="#ERDDAP_Tabledap.orderBy">erddapClient.ERDDAP_Tabledap.orderBy</a></code>, 
<code><a href="#ERDDAP_Tabledap.orderByClosest">erddapClient.ERDDAP_Tabledap.orderByClosest</a></code>, etc.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.clearResultVariables" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.clearResultVariables">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">clearResultVariables</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">clearResultVariables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears from the results variables stack all the variabkles provided by the </span>
<span class="sd">    `erddapClient.ERDDAP_Dataset.setResultsVariables` and </span>
<span class="sd">    `erddapClient.ERDDAP_Dataset.addResultVariable` methods</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>       
    <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clears from the results variables stack all the variabkles provided by the 
<code><a href="#ERDDAP_Dataset.setResultsVariables">erddapClient.ERDDAP_Dataset.setResultsVariables</a></code> and 
<code><a href="#ERDDAP_Dataset.addResultVariable">erddapClient.ERDDAP_Dataset.addResultVariable</a></code> methods</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.clearQuery" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.clearQuery">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">clearQuery</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">clearQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Clears all the query elements of the stack, variables, constraints and</span>
<span class="sd">    server side variables.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearConstraints</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearServerSideFunctions</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clearResultVariables</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clears all the query elements of the stack, variables, constraints and
server side variables.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.getData" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.getData">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getData</span><span class="signature">(self, filetype=&#39;csvp&#39;, request_kwargs={})</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">request_kwargs</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Makes a data request to the ERDDAP server, the request url is build</span>
<span class="sd">    using the `erddapClient.ERDDAP_Dataset.getURL` function. </span>

<span class="sd">    Aditional request arguments for the urlread function can be provided</span>
<span class="sd">    as kwargs in this function.</span>

<span class="sd">    Returns either a string or a binary format (`erddapClient.ERDDAP_Dataset.BINARY_FILETYPES`) </span>
<span class="sd">    depending on the filetype specified in the query.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rawRequest</span> <span class="o">=</span> <span class="n">urlread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">),</span> <span class="n">auth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">,</span> <span class="o">**</span><span class="n">request_kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filetype</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">BINARY_FILETYPES</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">rawRequest</span><span class="o">.</span><span class="n">content</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">rawRequest</span><span class="o">.</span><span class="n">text</span>
</pre></div>

        </details>

            <div class="docstring"><p>Makes a data request to the ERDDAP server, the request url is build
using the <code><a href="#ERDDAP_Dataset.getURL">erddapClient.ERDDAP_Dataset.getURL</a></code> function. </p>

<p>Aditional request arguments for the urlread function can be provided
as kwargs in this function.</p>

<p>Returns either a string or a binary format (<code><a href="#ERDDAP_Dataset.BINARY_FILETYPES">erddapClient.ERDDAP_Dataset.BINARY_FILETYPES</a></code>) 
depending on the filetype specified in the query.</p>
</div>


                            </div>
                            <div id="ERDDAP_Dataset.getDataFrame" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Dataset.getDataFrame">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getDataFrame</span><span class="signature">(self, request_kwargs={}, **kwargs)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getDataFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method makes a data request to the ERDDAP server in csv format</span>
<span class="sd">    then convert it to a pandas object. </span>
<span class="sd">    </span>
<span class="sd">    The pandas object is created using the read_csv method, and </span>
<span class="sd">    additional arguments for this method can be provided as kwargs in this</span>
<span class="sd">    method.</span>

<span class="sd">    Returns the pandas DataFrame object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">csvpdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="s1">&#39;csvp&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">request_kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">csvpdata</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This method makes a data request to the ERDDAP server in csv format
then convert it to a pandas object. </p>

<p>The pandas object is created using the read_csv method, and 
additional arguments for this method can be provided as kwargs in this
method.</p>

<p>Returns the pandas DataFrame object.</p>
</div>


                            </div>
                </section>
                <section id="ERDDAP_Tabledap">
                                <div class="attr class">
        <a class="headerlink" href="#ERDDAP_Tabledap">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ERDDAP_Tabledap</span><wbr>(<span class="base"><a href="#ERDDAP_Dataset">erddapClient.ERDDAP_Dataset</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ERDDAP_Tabledap</span><span class="p">(</span><span class="n">ERDDAP_Dataset</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Class with the representation and methods for a ERDDAP Tabledap Dataset</span>

<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">DEFAULT_FILETYPE</span> <span class="o">=</span> <span class="s1">&#39;csvp&#39;</span>

  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs the ERDDAP_Tabledap, and if specified, automaticaly loads</span>
<span class="sd">    the metadata information of the dataset.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `url` : The url of the ERDDAP Server that contains the tabledap dataset.</span>

<span class="sd">    `datasetid` : The identifier of the dataset.</span>

<span class="sd">    `auth` : Tupple with username and password for a protected ERDDAP Server.</span>

<span class="sd">    `lazyload` : If false calls the loadMetadata method.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="s1">&#39;tabledap&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="n">lazyload</span><span class="p">)</span>

  <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">dst_repr_</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">dst_repr_</span> <span class="o">+</span> <span class="n">tabledap_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">loadMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">(</span><span class="n">force</span><span class="p">):</span>
      <span class="n">parseTimeRangeAttributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>


  <span class="c1"># </span>
  <span class="c1"># Tabledap server side functions wrappers</span>
  <span class="c1"># </span>
  <span class="k">def</span> <span class="nf">addVariablesWhere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributeName</span><span class="p">,</span> <span class="n">attributeValue</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Adds &quot;addVariablesWhere&quot; server side function to the data request query</span>
<span class="sd">    [https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#addVariablesWhere](https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#addVariablesWhere)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> 
      <span class="s1">&#39;addVariablesWhere(&quot;</span><span class="si">{}</span><span class="s1">&quot;,&quot;</span><span class="si">{}</span><span class="s1">&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attributeName</span><span class="p">,</span> <span class="n">attributeValue</span><span class="p">)</span> 
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Adds &quot;distinct&quot; server side function to the data request query</span>
<span class="sd">    [https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#distinct](https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#distinct)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s1">&#39;distinct()&#39;</span> <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
  
  <span class="k">def</span> <span class="nf">units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#units</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s1">&#39;units(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">)</span>

  <span class="k">def</span> <span class="nf">orderBy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderBy</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderBy&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
  
  <span class="k">def</span> <span class="nf">orderByClosest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByClosest</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByClosest&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">orderByCount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByCount</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByCount&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>    

  <span class="k">def</span> <span class="nf">orderByLimit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByLimit</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByLimit&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">orderByMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMax</span>
<span class="sd">    &#39;&#39;&#39;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMax&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>    

  <span class="k">def</span> <span class="nf">orderByMin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMin</span>
<span class="sd">    &#39;&#39;&#39;</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMin&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>    

  <span class="k">def</span> <span class="nf">orderByMinMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMinMax</span>
<span class="sd">    &#39;&#39;&#39;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMinMax&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>  

  <span class="k">def</span> <span class="nf">orderByMean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMean</span>
<span class="sd">    &#39;&#39;&#39;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMean&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>     

  <span class="k">def</span> <span class="nf">addServerSideFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">functionName</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
      <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="se">\&quot;</span><span class="si">{}</span><span class="se">\&quot;</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">functionName</span><span class="p">,</span> <span class="n">ifListToCommaSeparatedString</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Class with the representation and methods for a ERDDAP Tabledap Dataset</p>
</div>


                            <div id="ERDDAP_Tabledap.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ERDDAP_Tabledap</span><span class="signature">(url, datasetid, auth=None, lazyload=True)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs the ERDDAP_Tabledap, and if specified, automaticaly loads</span>
<span class="sd">    the metadata information of the dataset.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `url` : The url of the ERDDAP Server that contains the tabledap dataset.</span>

<span class="sd">    `datasetid` : The identifier of the dataset.</span>

<span class="sd">    `auth` : Tupple with username and password for a protected ERDDAP Server.</span>

<span class="sd">    `lazyload` : If false calls the loadMetadata method.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="s1">&#39;tabledap&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="n">lazyload</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Constructs the ERDDAP_Tabledap, and if specified, automaticaly loads
the metadata information of the dataset.</p>

<p>Arguments:</p>

<p><code>url</code> : The url of the ERDDAP Server that contains the tabledap dataset.</p>

<p><code>datasetid</code> : The identifier of the dataset.</p>

<p><code>auth</code> : Tupple with username and password for a protected ERDDAP Server.</p>

<p><code>lazyload</code> : If false calls the loadMetadata method.</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.DEFAULT_FILETYPE" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Tabledap.DEFAULT_FILETYPE">#&nbsp;&nbsp</a>

        <span class="name">DEFAULT_FILETYPE</span><span class="default_value"> = &#39;csvp&#39;</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Tabledap.loadMetadata" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.loadMetadata">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">loadMetadata</span><span class="signature">(self, force=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">loadMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">(</span><span class="n">force</span><span class="p">):</span>
      <span class="n">parseTimeRangeAttributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</pre></div>

        </details>

            <div class="docstring"><p>Loads in to memory the metadata atributes and values available in the info
page of the dataset.</p>

<p>Arguments:</p>

<p><code>force</code> : If true, this method will reload the metadata attributes
even if the information where already downloaded.</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.addVariablesWhere" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.addVariablesWhere">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">addVariablesWhere</span><span class="signature">(self, attributeName, attributeValue)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">addVariablesWhere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attributeName</span><span class="p">,</span> <span class="n">attributeValue</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Adds &quot;addVariablesWhere&quot; server side function to the data request query</span>
<span class="sd">    [https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#addVariablesWhere](https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#addVariablesWhere)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> 
      <span class="s1">&#39;addVariablesWhere(&quot;</span><span class="si">{}</span><span class="s1">&quot;,&quot;</span><span class="si">{}</span><span class="s1">&quot;)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attributeName</span><span class="p">,</span> <span class="n">attributeValue</span><span class="p">)</span> 
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>Adds "addVariablesWhere" server side function to the data request query
<a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#addVariablesWhere">https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#addVariablesWhere</a></p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.distinct" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.distinct">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">distinct</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">distinct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Adds &quot;distinct&quot; server side function to the data request query</span>
<span class="sd">    [https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#distinct](https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#distinct)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s1">&#39;distinct()&#39;</span> <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>Adds "distinct" server side function to the data request query
<a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#distinct">https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#distinct</a></p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.units" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.units">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">units</span><span class="signature">(self, value)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#units</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s1">&#39;units(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#units</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderBy" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderBy">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderBy</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderBy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderBy</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderBy&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderBy</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderByClosest" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderByClosest">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderByClosest</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderByClosest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByClosest</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByClosest&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByClosest</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderByCount" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderByCount">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderByCount</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderByCount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByCount</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByCount&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>    
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByCount</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderByLimit" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderByLimit">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderByLimit</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderByLimit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByLimit</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByLimit&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByLimit</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderByMax" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderByMax">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderByMax</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderByMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMax</span>
<span class="sd">    &#39;&#39;&#39;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMax&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>    
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMax</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderByMin" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderByMin">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderByMin</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderByMin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMin</span>
<span class="sd">    &#39;&#39;&#39;</span> 
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMin&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>    
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMin</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderByMinMax" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderByMinMax">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderByMinMax</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderByMinMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMinMax</span>
<span class="sd">    &#39;&#39;&#39;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMinMax&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>  
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMinMax</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.orderByMean" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.orderByMean">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">orderByMean</span><span class="signature">(self, variables)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">orderByMean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMean</span>
<span class="sd">    &#39;&#39;&#39;</span>    
    <span class="bp">self</span><span class="o">.</span><span class="n">addServerSideFunction</span><span class="p">(</span><span class="s1">&#39;orderByMean&#39;</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>     
</pre></div>

        </details>

            <div class="docstring"><p>https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#orderByMean</p>
</div>


                            </div>
                            <div id="ERDDAP_Tabledap.addServerSideFunction" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Tabledap.addServerSideFunction">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">addServerSideFunction</span><span class="signature">(self, functionName, arguments)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">addServerSideFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">functionName</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">serverSideFunctions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
      <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="se">\&quot;</span><span class="si">{}</span><span class="se">\&quot;</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">functionName</span><span class="p">,</span> <span class="n">ifListToCommaSeparatedString</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#ERDDAP_Dataset">ERDDAP_Dataset</a></dt>
                                <dd id="ERDDAP_Tabledap.BINARY_FILETYPES" class="variable"><a href="#ERDDAP_Dataset.BINARY_FILETYPES">BINARY_FILETYPES</a></dd>
                <dd id="ERDDAP_Tabledap.setResultVariables" class="function"><a href="#ERDDAP_Dataset.setResultVariables">setResultVariables</a></dd>
                <dd id="ERDDAP_Tabledap.addResultVariable" class="function"><a href="#ERDDAP_Dataset.addResultVariable">addResultVariable</a></dd>
                <dd id="ERDDAP_Tabledap.setConstraints" class="function"><a href="#ERDDAP_Dataset.setConstraints">setConstraints</a></dd>
                <dd id="ERDDAP_Tabledap.addConstraints" class="function"><a href="#ERDDAP_Dataset.addConstraints">addConstraints</a></dd>
                <dd id="ERDDAP_Tabledap.addConstraint" class="function"><a href="#ERDDAP_Dataset.addConstraint">addConstraint</a></dd>
                <dd id="ERDDAP_Tabledap.getDataRequestURL" class="function"><a href="#ERDDAP_Dataset.getDataRequestURL">getDataRequestURL</a></dd>
                <dd id="ERDDAP_Tabledap.getURL" class="function"><a href="#ERDDAP_Dataset.getURL">getURL</a></dd>
                <dd id="ERDDAP_Tabledap.getBaseURL" class="function"><a href="#ERDDAP_Dataset.getBaseURL">getBaseURL</a></dd>
                <dd id="ERDDAP_Tabledap.getAttribute" class="function"><a href="#ERDDAP_Dataset.getAttribute">getAttribute</a></dd>
                <dd id="ERDDAP_Tabledap.variables" class="variable"><a href="#ERDDAP_Dataset.variables">variables</a></dd>
                <dd id="ERDDAP_Tabledap.dimensions" class="variable"><a href="#ERDDAP_Dataset.dimensions">dimensions</a></dd>
                <dd id="ERDDAP_Tabledap.info" class="variable"><a href="#ERDDAP_Dataset.info">info</a></dd>
                <dd id="ERDDAP_Tabledap.getMetadataURL" class="function"><a href="#ERDDAP_Dataset.getMetadataURL">getMetadataURL</a></dd>
                <dd id="ERDDAP_Tabledap.clearConstraints" class="function"><a href="#ERDDAP_Dataset.clearConstraints">clearConstraints</a></dd>
                <dd id="ERDDAP_Tabledap.clearServerSideFunctions" class="function"><a href="#ERDDAP_Dataset.clearServerSideFunctions">clearServerSideFunctions</a></dd>
                <dd id="ERDDAP_Tabledap.clearResultVariables" class="function"><a href="#ERDDAP_Dataset.clearResultVariables">clearResultVariables</a></dd>
                <dd id="ERDDAP_Tabledap.clearQuery" class="function"><a href="#ERDDAP_Dataset.clearQuery">clearQuery</a></dd>
                <dd id="ERDDAP_Tabledap.getData" class="function"><a href="#ERDDAP_Dataset.getData">getData</a></dd>
                <dd id="ERDDAP_Tabledap.getDataFrame" class="function"><a href="#ERDDAP_Dataset.getDataFrame">getDataFrame</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ERDDAP_Griddap">
                                <div class="attr class">
        <a class="headerlink" href="#ERDDAP_Griddap">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">ERDDAP_Griddap</span><wbr>(<span class="base"><a href="#ERDDAP_Dataset">erddapClient.ERDDAP_Dataset</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ERDDAP_Griddap</span><span class="p">(</span><span class="n">ERDDAP_Dataset</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Class with the representation and methods for a ERDDAP Griddap Dataset</span>

<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">DEFAULT_FILETYPE</span> <span class="o">=</span> <span class="s1">&#39;nc&#39;</span>

  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="s1">&#39;griddap&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="n">lazyload</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This property stores the last dimensions slices that builds the subset query. Its used to build opendap</span>
<span class="sd">    compatible queryes, and to get the dimensions values of the subset.</span>
<span class="sd">    &quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">dst_repr_</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">dst_repr_</span> <span class="o">+</span> <span class="n">griddap_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


  <span class="k">def</span> <span class="nf">loadMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads in to memory the metadata atributes and values available in the info</span>
<span class="sd">    page of the dataset.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `force` : If true, this method will reload the metadata attributes</span>
<span class="sd">    even if the information where already downloaded.   </span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">(</span><span class="n">force</span><span class="p">):</span>
      <span class="n">parseTimeRangeAttributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ERDDAP_Dataset__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>


  <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">dimensions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loadDimensionValues</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span>


  <span class="k">def</span> <span class="nf">clearQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">clearQuery</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="kc">None</span>


  <span class="k">def</span> <span class="nf">loadDimensionValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This methods loads from the ERDDAP Server the dimension values</span>
<span class="sd">    for the current griddap dataset.  This values will be used to </span>
<span class="sd">    calculate integer indexes for opendap requests.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `force` : If true, this method will reload the dimensions values</span>
<span class="sd">    even if the values where already downloaded.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
      <span class="n">dimensionVariableNames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ERDDAP_Dataset__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

      <span class="n">_resultVars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span>
      <span class="n">dimensionsData</span> <span class="o">=</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">setResultVariables</span><span class="p">(</span><span class="n">dimensionVariableNames</span><span class="p">)</span>
                             <span class="o">.</span><span class="n">getDataFrame</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">dimensionVariableNames</span><span class="p">)</span>  <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="n">_resultVars</span>
      
      <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span> <span class="o">=</span> <span class="n">ERDDAP_Griddap_dimensions</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">dimName</span> <span class="ow">in</span> <span class="n">dimensionVariableNames</span><span class="p">:</span>
        
        <span class="n">dimDatadroppedNaNs</span> <span class="o">=</span> <span class="n">dimensionsData</span><span class="p">[</span><span class="n">dimName</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dimName</span> <span class="o">==</span> <span class="s1">&#39;time&#39;</span><span class="p">:</span>
          <span class="n">numericDates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">date2num</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">_dt</span><span class="p">,</span> <span class="n">ERDDAP_DATETIME_FORMAT</span><span class="p">),</span> <span class="n">ERDDAP_TIME_UNITS</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">_dt</span><span class="p">,</span><span class="nb">str</span><span class="p">))</span> <span class="k">else</span> <span class="n">_dt</span> <span class="k">for</span> <span class="n">_dt</span> <span class="ow">in</span> <span class="n">dimDatadroppedNaNs</span><span class="p">]</span> <span class="p">)</span>
          <span class="n">dimensionSeries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">numericDates</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">index</span> <span class="o">=</span> <span class="n">numericDates</span><span class="p">)</span>   
        <span class="k">else</span><span class="p">:</span>
          <span class="n">dimensionSeries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dimDatadroppedNaNs</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">dimDatadroppedNaNs</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> 

        <span class="n">dimMeta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ERDDAP_Dataset__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">][</span><span class="n">dimName</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span><span class="p">[</span><span class="n">dimName</span><span class="p">]</span> <span class="o">=</span> <span class="n">ERDDAP_Griddap_dimension</span><span class="p">(</span><span class="n">dimName</span><span class="p">,</span> <span class="n">dimensionSeries</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dimMeta</span><span class="p">)</span>       


  <span class="k">def</span> <span class="nf">getxArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_od</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an xarray object subset of the ERDDAP dataset current selection query</span>

<span class="sd">    Arguments:</span>

<span class="sd">    This method will pass all kwargs to the xarray.open_dataset method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">open_dataset_kwparams</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;mask_and_scale&#39;</span> <span class="p">:</span> <span class="kc">True</span> <span class="p">}</span> <span class="c1"># Accept _FillValue, scale_value and add_offset attribute functionality</span>
    <span class="n">open_dataset_kwparams</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs_od</span><span class="p">)</span>
    <span class="n">subsetURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;opendap&#39;</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">:</span>
      <span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
      <span class="n">session</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span>
      <span class="n">store</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">PydapDataStore</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span>
                                              <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
      <span class="n">_xarray</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">store</span><span class="p">,</span> <span class="o">**</span><span class="n">open_dataset_kwparams</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">_xarray</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span> <span class="o">**</span><span class="n">open_dataset_kwparams</span><span class="p">)</span>
    
    <span class="c1"># Add extra information to the xarray object, the dimension information.</span>
    <span class="c1"># Add the subset of the dimensions values to the xarray object</span>
    <span class="n">_subset_coords</span> <span class="o">=</span> <span class="p">{</span> <span class="n">dimName</span> <span class="p">:</span> <span class="n">dObj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">[</span><span class="n">dimName</span><span class="p">]]</span> <span class="k">for</span> <span class="n">dimName</span><span class="p">,</span> <span class="n">dObj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="p">:</span>
      <span class="n">_subset_coords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="o">.</span><span class="n">timeData</span><span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="p">]</span>
    <span class="n">_xarray</span> <span class="o">=</span> <span class="n">_xarray</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span><span class="n">_subset_coords</span><span class="p">)</span>
    <span class="c1"># Add attributes to the coordinates</span>
    <span class="k">for</span> <span class="n">dimName</span><span class="p">,</span> <span class="n">dObj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
      <span class="n">_xarray</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">dimName</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">dObj</span><span class="o">.</span><span class="n">metadata</span>

    <span class="k">return</span> <span class="n">_xarray</span>


  <span class="k">def</span> <span class="nf">getncDataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an netCDF4.Dataset object subset of the ERDDAP dataset</span>

<span class="sd">    Arguments:</span>

<span class="sd">    This method will pass all kwargs to the netCDF4.Dataset method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subsetURL</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;opendap&#39;</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">:</span>
      <span class="c1"># TODO Add user, password in URL</span>
      <span class="n">_netcdf4Dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">_netcdf4Dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_netcdf4Dataset</span> 


  <span class="k">def</span> <span class="nf">getDataRequestURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">resultVariables</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the fully built ERDDAP data request url with the available components. </span>

<span class="sd">    Arguments:</span>

<span class="sd">    `filetype` : The request download format </span>

<span class="sd">    `useSafeURL` : If True the query part of the url will be encoded</span>

<span class="sd">    `resultVariables` : If None, the self.resultVariables will be used.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">requestURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">resultVariables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;opendap&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">loadDimensionValues</span><span class="p">()</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">:</span>
        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resultVariablesWithValidDapIndexing</span><span class="p">()</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="c1"># resultVariables = self._convertERDDAPSubset2OpendapRegular(resultVariables)</span>
        <span class="c1">#</span>
        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parseResultVariablesExtendedDapQueryToValidDap</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">:</span>
        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resultVariablesWithValidDapIndexing</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">item_separator</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

    <span class="n">requestURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">requestURL</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span> <span class="o">=</span> <span class="n">requestURL</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span>


  <span class="k">def</span> <span class="nf">setSubset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets a query subset for griddap request, by using dimension names</span>

<span class="sd">    Usage example:</span>

<span class="sd">    ```</span>
<span class="sd">    dsub = ( remote.setResultVariables([&#39;temperature&#39;,&#39;salinity&#39;])</span>
<span class="sd">                   .setSubset( time=slice(dt.datetime(2014,6,15), dt.datetime(2014,7,15)),</span>
<span class="sd">                               depth=0,</span>
<span class="sd">                               latitude=slice(18.10, 31.96), </span>
<span class="sd">                               longitude=slice(-98, -76.41))</span>
<span class="sd">                   .getxArray() )</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>


  <span class="k">def</span> <span class="nf">setSubsetI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets a query subset for griddap request, by using its positional</span>
<span class="sd">    integer index.</span>

<span class="sd">    Usage example:</span>

<span class="sd">    ```</span>
<span class="sd">    dsub = ( remote.setResultVariables([&#39;temperature&#39;,&#39;salinity&#39;])</span>
<span class="sd">                   .setSubsetI( time=slice(-10,-1),</span>
<span class="sd">                                depth=0,</span>
<span class="sd">                                latitude=slice(10, 150), </span>
<span class="sd">                                longitude=slice(20, 100) )</span>
<span class="sd">                   .getxArray() )</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">subsetI</span><span class="p">(</span><span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">_parseResultVariablesExtendedDapQueryToValidDap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resultVariables</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method will receive a string from the resultVariables part of the</span>
<span class="sd">    ERDDAP griddap request like: </span>
<span class="sd">     ssh[(2001-06-01T09:00:00Z):(2002-06-01T09:00:00Z)][0:(last-20.3)][last-20:1:last]</span>

<span class="sd">    And will return the each result varibel with valid opendap integer indexing query,</span>
<span class="sd">     ssh[10:20][0:70.7][300:359]</span>
<span class="sd">    </span>
<span class="sd">    This operation is done by parsing the subset, obtaining the elements of the</span>
<span class="sd">    slice that are erddap opendap extended format, the ones between ( ), and converting</span>
<span class="sd">    the nearest integer index.</span>

<span class="sd">    By parsing the subset, this function returns also error messages on a bad formed</span>
<span class="sd">    query.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">queryComponents</span> <span class="o">=</span> <span class="n">parse_griddap_resultvariables_slices</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">)</span>

    <span class="n">parsedResultVariables</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_parsed_positional_indexes</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">({</span> <span class="n">dimname</span> <span class="p">:</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">dimname</span><span class="p">,</span> <span class="n">dobj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">})</span>
    <span class="k">for</span> <span class="n">qIdx</span><span class="p">,</span> <span class="n">queryComponent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">queryComponents</span><span class="p">):</span>

      <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">queryComponent</span><span class="p">[</span><span class="s1">&#39;sliceComponents&#39;</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">queryComponent</span><span class="p">[</span><span class="s1">&#39;sliceComponents&#39;</span><span class="p">]):</span>        
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;The subset request (</span><span class="si">{}</span><span class="s1">) must match the number of dimensions (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">[</span><span class="n">qIdx</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">ndims</span><span class="p">))</span>
        
      <span class="n">indexSlice</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start&#39;</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span> <span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
      <span class="n">indexSliceStr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

      <span class="k">for</span> <span class="n">dimOrder</span><span class="p">,</span> <span class="p">(</span><span class="n">dimensionName</span><span class="p">,</span> <span class="n">sliceComponent</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">queryComponent</span><span class="p">[</span><span class="s1">&#39;sliceComponents&#39;</span><span class="p">])):</span>
        
        <span class="c1"># Check if start of stop components of the slice is opendap extended format, </span>
        <span class="c1"># The way to detect them is if they are between (dimValue) </span>
        <span class="k">for</span> <span class="n">slicePart</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">]:</span>

          <span class="k">if</span> <span class="n">slicePart</span> <span class="ow">in</span> <span class="n">sliceComponent</span> <span class="ow">and</span> <span class="n">is_slice_element_opendap_extended</span><span class="p">(</span><span class="n">sliceComponent</span><span class="p">[</span><span class="n">slicePart</span><span class="p">]):</span>
            <span class="c1"># In griddap querys, the slice start and stop, can be between ( ), this notation is a extended</span>
            <span class="c1"># opendap format that uses the dimensions values or special keywords to slice the dimensions.</span>
            <span class="c1"># More on this: https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#query</span>

            <span class="n">sliceComponentValue</span> <span class="o">=</span> <span class="n">get_value_from_opendap_extended_slice_element</span><span class="p">(</span><span class="n">sliceComponent</span><span class="p">[</span><span class="n">slicePart</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">validate_iso8601</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">):</span>
              <span class="n">sliceComponentValueNum</span> <span class="o">=</span> <span class="n">iso8601STRtoNum</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">)</span>
              <span class="n">sliceComponentIdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span><span class="o">.</span><span class="n">closestIdx</span><span class="p">(</span><span class="n">sliceComponentValueNum</span><span class="p">)</span>
              
            <span class="k">elif</span> <span class="n">validate_float</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">):</span>
              <span class="n">sliceComponentValue</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">)</span>
              <span class="n">sliceComponentIdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span><span class="o">.</span><span class="n">closestIdx</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">validate_int</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">):</span>
              <span class="n">sliceComponentValue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">)</span>
              <span class="n">sliceComponentIdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span><span class="o">.</span><span class="n">closestIdx</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">validate_last_keyword</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">):</span>
              <span class="n">sliceComponentValue2Eval</span> <span class="o">=</span> <span class="n">sliceComponentValue</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;last&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
              <span class="n">sliceComponentIdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span><span class="o">.</span><span class="n">closestIdx</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">sliceComponentValue2Eval</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Malformed subset : (</span><span class="si">{}</span><span class="s1">) , couldn</span><span class="se">\&#39;</span><span class="s1">t parse: (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">[</span><span class="n">qIdx</span><span class="p">],</span> <span class="n">sliceComponentValue</span><span class="p">))</span>
            
          <span class="k">else</span><span class="p">:</span>
            <span class="c1"># In the slice is not between ( ) , then this means the slice component its using the numeric indexes</span>
            <span class="c1"># to create the slice.  The only special keyword allowed here, its &#39;last&#39;, which means the last numeric</span>
            <span class="c1"># index in the current dimension.</span>
            <span class="c1"># More on this: https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#last</span>
            <span class="k">if</span> <span class="n">slicePart</span> <span class="ow">in</span> <span class="n">sliceComponent</span><span class="p">:</span>
              <span class="n">sliceComponentValue</span> <span class="o">=</span> <span class="n">sliceComponent</span><span class="p">[</span><span class="n">slicePart</span><span class="p">]</span>
              <span class="k">if</span> <span class="n">validate_last_keyword</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">):</span>
                <span class="n">sliceComponentValue2Eval</span> <span class="o">=</span> <span class="n">sliceComponentValue</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;last&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">sliceComponentIdx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">sliceComponentValue2Eval</span><span class="p">))</span>
              <span class="k">else</span><span class="p">:</span>
                <span class="n">sliceComponentIdx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sliceComponentValue</span><span class="p">)</span>

          <span class="k">if</span> <span class="n">sliceComponentIdx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Malformed subset : (</span><span class="si">{}</span><span class="s1">) , The constraint (</span><span class="si">{}</span><span class="s1">) is out of dimension range: [</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">[</span><span class="n">qIdx</span><span class="p">],</span> <span class="n">sliceComponentValue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span><span class="o">.</span><span class="n">range</span><span class="p">))</span>

          <span class="n">indexSlice</span><span class="p">[</span><span class="n">slicePart</span><span class="p">]</span> <span class="o">=</span> <span class="n">sliceComponentIdx</span>        
        <span class="c1">#endfor slicePart</span>

        <span class="c1"># Build the valid slice object with equivalent numeric indexes in self.__positional_indexes</span>
        <span class="n">_sobj</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># slice object, to include to self.__positional_indexes</span>
        <span class="k">if</span> <span class="s1">&#39;stride&#39;</span> <span class="ow">in</span> <span class="n">sliceComponent</span><span class="p">:</span>
          <span class="n">_sobj</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span> <span class="n">indexSlice</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">],</span> <span class="n">indexSlice</span><span class="p">[</span><span class="s1">&#39;stop&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">sliceComponent</span><span class="p">[</span><span class="s1">&#39;stride&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;stop&#39;</span> <span class="ow">in</span> <span class="n">sliceComponent</span><span class="p">:</span>
          <span class="n">_sobj</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">indexSlice</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">],</span> <span class="n">indexSlice</span><span class="p">[</span><span class="s1">&#39;stop&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;start&#39;</span> <span class="ow">in</span> <span class="n">sliceComponent</span><span class="p">:</span>
          <span class="n">_sobj</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">indexSlice</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">],</span> <span class="n">indexSlice</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">_parsed_positional_indexes</span><span class="p">[</span><span class="n">dimensionName</span><span class="p">]</span> <span class="o">=</span> <span class="n">_sobj</span>
        
      <span class="c1">#endfor dimension</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="n">_parsed_positional_indexes</span>
      <span class="n">_validDapIndexing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convertPositionalIndexes2DapQuery</span><span class="p">()</span>

      <span class="c1"># Join the variable name with the openDap indexing</span>
      <span class="n">parsedResultVariables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">queryComponent</span><span class="p">[</span><span class="s1">&#39;variableName&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">_validDapIndexing</span><span class="p">)</span>
    
    <span class="c1">#end for queryComponent</span>
      
    <span class="k">return</span> <span class="n">parsedResultVariables</span>


  <span class="k">def</span> <span class="nf">_convertPositionalIndexes2DapQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function will convert the positional_indexes dictionary of slices, to a string</span>
<span class="sd">    query type, compatible with the opendap protocol.</span>

<span class="sd">    The property __positional_indexes will contain the slices for each dimension in a dict.</span>

<span class="sd">    OrderedDict([(&#39;time&#39;, slice(200, 201, None)),</span>
<span class="sd">             (&#39;altitude&#39;, slice(0, 1, None)),</span>
<span class="sd">             (&#39;latitude&#39;, slice(337, 465, None)),</span>
<span class="sd">             (&#39;longitude&#39;, slice(1018, 1146, None))])</span>

<span class="sd">    This method converts and returns the above to the opendap compatible query string.</span>

<span class="sd">    [200:200][0:0][337:464][1018:1145]</span>

<span class="sd">    Returns:</span>
<span class="sd">      - Compatible opendap query string</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">parseNegativeIndex</span><span class="p">(</span><span class="n">nidx</span><span class="p">,</span> <span class="n">dref</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">nidx</span> <span class="k">if</span> <span class="n">nidx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">dref</span><span class="o">.</span><span class="n">size</span> <span class="o">+</span> <span class="n">nidx</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">all</span><span class="p">(</span><span class="n">dimSlice</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">dimName</span><span class="p">,</span> <span class="n">dimSlice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
      <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    
    <span class="n">validDapIndexing</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">dimName</span><span class="p">,</span> <span class="n">dimSlice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">dimSlice</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not a valid slice available for dimension: </span><span class="si">{}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dimName</span><span class="p">))</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">dimSlice</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_start</span> <span class="o">=</span> <span class="n">parseNegativeIndex</span><span class="p">(</span><span class="n">dimSlice</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimName</span><span class="p">])</span>
        <span class="n">_stop</span> <span class="o">=</span> <span class="n">parseNegativeIndex</span><span class="p">(</span><span class="n">dimSlice</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimName</span><span class="p">])</span>
        <span class="c1">#_sc = &quot;[{}:{}:{}]&quot;.format(dimSlice.start, dimSlice.step, dimSlice.stop-1)</span>
        <span class="n">_sc</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_start</span><span class="p">,</span> <span class="n">dimSlice</span><span class="o">.</span><span class="n">step</span><span class="p">,</span> <span class="n">_stop</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">elif</span> <span class="ow">not</span> <span class="n">dimSlice</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_start</span> <span class="o">=</span> <span class="n">parseNegativeIndex</span><span class="p">(</span><span class="n">dimSlice</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimName</span><span class="p">])</span>
        <span class="n">_stop</span> <span class="o">=</span> <span class="n">parseNegativeIndex</span><span class="p">(</span><span class="n">dimSlice</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimName</span><span class="p">])</span>
        <span class="c1"># _sc = &quot;[{}:{}]&quot;.format(dimSlice.start, dimSlice.stop-1)</span>
        <span class="n">_sc</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_start</span><span class="p">,</span> <span class="n">_stop</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="k">elif</span> <span class="ow">not</span> <span class="n">dimSlice</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_stop</span> <span class="o">=</span> <span class="n">parseNegativeIndex</span><span class="p">(</span><span class="n">dimSlice</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="n">dimName</span><span class="p">])</span>
        <span class="c1"># _sc = &quot;[{}]&quot;.format(dimSlice.stop)</span>
        <span class="n">_sc</span> <span class="o">=</span> <span class="s2">&quot;[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_stop</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No valid slice available for dimension: </span><span class="si">{}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dimName</span><span class="p">))</span>
      <span class="n">validDapIndexing</span><span class="o">+=</span><span class="n">_sc</span>
    
    <span class="k">return</span> <span class="n">validDapIndexing</span>


  <span class="k">def</span> <span class="nf">_resultVariablesWithValidDapIndexing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the opendap query of the variables listed in the resultVariables </span>
<span class="sd">    property, with valid opendap indexing. </span>
<span class="sd">    The indexing its built from the current positional_indexes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_validDapIndexing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convertPositionalIndexes2DapQuery</span><span class="p">()</span>
    <span class="n">validDapQuery</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">varName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">validDapQuery</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">varName</span> <span class="o">+</span> <span class="n">_validDapIndexing</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">varName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">:</span>
        <span class="n">_justvarname</span> <span class="o">=</span> <span class="n">extractVariableName</span><span class="p">(</span><span class="n">varName</span><span class="p">)</span>
        <span class="n">validDapQuery</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_justvarname</span> <span class="o">+</span> <span class="n">_validDapIndexing</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">validDapQuery</span>


  <span class="nd">@property</span> 
  <span class="k">def</span> <span class="nf">positional_indexes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span>

  <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">xarray</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the xarray object representation of the whoe dataset. Ths method creates the</span>
<span class="sd">    xarray object by calling the open_dataset method and connecting to the </span>
<span class="sd">    opendap endpoint that ERDDAP provides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__xarray&#39;</span><span class="p">):</span>      
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">:</span>
        <span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="n">session</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span>
        <span class="n">store</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">PydapDataStore</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="s1">&#39;opendap&#39;</span><span class="p">),</span>
                                                <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xarray</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xarray</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="s1">&#39;opendap&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__xarray</span>


  <span class="nd">@property</span>
  <span class="k">def</span> <span class="nf">ncDataset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the netCDF4.Dataset object representation of the whole dataset. Ths method</span>
<span class="sd">    creates the Dataset object by calling the Dataset constructor connecting </span>
<span class="sd">    to the opendap endpoint that ERDDAP provides.</span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;__netcdf4Dataset&#39;</span><span class="p">):</span>      
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">:</span>
        <span class="c1"># TODO Add user, password in URL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__netcdf4Dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="s1">&#39;opendap&#39;</span><span class="p">))</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__netcdf4Dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="s1">&#39;opendap&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__netcdf4Dataset</span>    
</pre></div>

        </details>

            <div class="docstring"><p>Class with the representation and methods for a ERDDAP Griddap Dataset</p>
</div>


                            <div id="ERDDAP_Griddap.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">ERDDAP_Griddap</span><span class="signature">(url, datasetid, auth=None, lazyload=True)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">datasetid</span><span class="p">,</span> <span class="s1">&#39;griddap&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">lazyload</span><span class="o">=</span><span class="n">lazyload</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This property stores the last dimensions slices that builds the subset query. Its used to build opendap</span>
<span class="sd">    compatible queryes, and to get the dimensions values of the subset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="ERDDAP_Griddap.DEFAULT_FILETYPE" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Griddap.DEFAULT_FILETYPE">#&nbsp;&nbsp</a>

        <span class="name">DEFAULT_FILETYPE</span><span class="default_value"> = &#39;nc&#39;</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Griddap.loadMetadata" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.loadMetadata">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">loadMetadata</span><span class="signature">(self, force=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">loadMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads in to memory the metadata atributes and values available in the info</span>
<span class="sd">    page of the dataset.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `force` : If true, this method will reload the metadata attributes</span>
<span class="sd">    even if the information where already downloaded.   </span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">(</span><span class="n">force</span><span class="p">):</span>
      <span class="n">parseTimeRangeAttributes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ERDDAP_Dataset__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</pre></div>

        </details>

            <div class="docstring"><p>Loads in to memory the metadata atributes and values available in the info
page of the dataset.</p>

<p>Arguments:</p>

<p><code>force</code> : If true, this method will reload the metadata attributes
even if the information where already downloaded.</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.dimensions" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Griddap.dimensions">#&nbsp;&nbsp</a>

        <span class="name">dimensions</span>
    </div>

            <div class="docstring"><p>Returns a list of the dataset dimensions, and it's associate metadata</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.clearQuery" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.clearQuery">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">clearQuery</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">clearQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">clearQuery</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clears all the query elements of the stack, variables, constraints and
server side variables.</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.loadDimensionValues" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.loadDimensionValues">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">loadDimensionValues</span><span class="signature">(self, force=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">loadDimensionValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This methods loads from the ERDDAP Server the dimension values</span>
<span class="sd">    for the current griddap dataset.  This values will be used to </span>
<span class="sd">    calculate integer indexes for opendap requests.</span>

<span class="sd">    Arguments:</span>

<span class="sd">    `force` : If true, this method will reload the dimensions values</span>
<span class="sd">    even if the values where already downloaded.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">loadMetadata</span><span class="p">()</span>
      <span class="n">dimensionVariableNames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ERDDAP_Dataset__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

      <span class="n">_resultVars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span>
      <span class="n">dimensionsData</span> <span class="o">=</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">setResultVariables</span><span class="p">(</span><span class="n">dimensionVariableNames</span><span class="p">)</span>
                             <span class="o">.</span><span class="n">getDataFrame</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">dimensionVariableNames</span><span class="p">)</span>  <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span> <span class="o">=</span> <span class="n">_resultVars</span>
      
      <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span> <span class="o">=</span> <span class="n">ERDDAP_Griddap_dimensions</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">dimName</span> <span class="ow">in</span> <span class="n">dimensionVariableNames</span><span class="p">:</span>
        
        <span class="n">dimDatadroppedNaNs</span> <span class="o">=</span> <span class="n">dimensionsData</span><span class="p">[</span><span class="n">dimName</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dimName</span> <span class="o">==</span> <span class="s1">&#39;time&#39;</span><span class="p">:</span>
          <span class="n">numericDates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">date2num</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">_dt</span><span class="p">,</span> <span class="n">ERDDAP_DATETIME_FORMAT</span><span class="p">),</span> <span class="n">ERDDAP_TIME_UNITS</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">_dt</span><span class="p">,</span><span class="nb">str</span><span class="p">))</span> <span class="k">else</span> <span class="n">_dt</span> <span class="k">for</span> <span class="n">_dt</span> <span class="ow">in</span> <span class="n">dimDatadroppedNaNs</span><span class="p">]</span> <span class="p">)</span>
          <span class="n">dimensionSeries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">numericDates</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">index</span> <span class="o">=</span> <span class="n">numericDates</span><span class="p">)</span>   
        <span class="k">else</span><span class="p">:</span>
          <span class="n">dimensionSeries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dimDatadroppedNaNs</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">dimDatadroppedNaNs</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> 

        <span class="n">dimMeta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ERDDAP_Dataset__metadata</span><span class="p">[</span><span class="s1">&#39;dimensions&#39;</span><span class="p">][</span><span class="n">dimName</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dimensions</span><span class="p">[</span><span class="n">dimName</span><span class="p">]</span> <span class="o">=</span> <span class="n">ERDDAP_Griddap_dimension</span><span class="p">(</span><span class="n">dimName</span><span class="p">,</span> <span class="n">dimensionSeries</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">dimMeta</span><span class="p">)</span>       
</pre></div>

        </details>

            <div class="docstring"><p>This methods loads from the ERDDAP Server the dimension values
for the current griddap dataset.  This values will be used to 
calculate integer indexes for opendap requests.</p>

<p>Arguments:</p>

<p><code>force</code> : If true, this method will reload the dimensions values
even if the values where already downloaded.</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.getxArray" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.getxArray">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getxArray</span><span class="signature">(self, **kwargs_od)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getxArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_od</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an xarray object subset of the ERDDAP dataset current selection query</span>

<span class="sd">    Arguments:</span>

<span class="sd">    This method will pass all kwargs to the xarray.open_dataset method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">open_dataset_kwparams</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;mask_and_scale&#39;</span> <span class="p">:</span> <span class="kc">True</span> <span class="p">}</span> <span class="c1"># Accept _FillValue, scale_value and add_offset attribute functionality</span>
    <span class="n">open_dataset_kwparams</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs_od</span><span class="p">)</span>
    <span class="n">subsetURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;opendap&#39;</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">:</span>
      <span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
      <span class="n">session</span><span class="o">.</span><span class="n">auth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span>
      <span class="n">store</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">PydapDataStore</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span>
                                              <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">)</span>
      <span class="n">_xarray</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">store</span><span class="p">,</span> <span class="o">**</span><span class="n">open_dataset_kwparams</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">_xarray</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span> <span class="o">**</span><span class="n">open_dataset_kwparams</span><span class="p">)</span>
    
    <span class="c1"># Add extra information to the xarray object, the dimension information.</span>
    <span class="c1"># Add the subset of the dimensions values to the xarray object</span>
    <span class="n">_subset_coords</span> <span class="o">=</span> <span class="p">{</span> <span class="n">dimName</span> <span class="p">:</span> <span class="n">dObj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">[</span><span class="n">dimName</span><span class="p">]]</span> <span class="k">for</span> <span class="n">dimName</span><span class="p">,</span> <span class="n">dObj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="p">:</span>
      <span class="n">_subset_coords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="o">.</span><span class="n">timeData</span><span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">timeDimension</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="p">]</span>
    <span class="n">_xarray</span> <span class="o">=</span> <span class="n">_xarray</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span><span class="n">_subset_coords</span><span class="p">)</span>
    <span class="c1"># Add attributes to the coordinates</span>
    <span class="k">for</span> <span class="n">dimName</span><span class="p">,</span> <span class="n">dObj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
      <span class="n">_xarray</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="n">dimName</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">dObj</span><span class="o">.</span><span class="n">metadata</span>

    <span class="k">return</span> <span class="n">_xarray</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns an xarray object subset of the ERDDAP dataset current selection query</p>

<p>Arguments:</p>

<p>This method will pass all kwargs to the xarray.open_dataset method.</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.getncDataset" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.getncDataset">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getncDataset</span><span class="signature">(self, **kwargs)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getncDataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an netCDF4.Dataset object subset of the ERDDAP dataset</span>

<span class="sd">    Arguments:</span>

<span class="sd">    This method will pass all kwargs to the netCDF4.Dataset method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subsetURL</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDataRequestURL</span><span class="p">(</span><span class="n">filetype</span><span class="o">=</span><span class="s1">&#39;opendap&#39;</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">erddapauth</span><span class="p">:</span>
      <span class="c1"># TODO Add user, password in URL</span>
      <span class="n">_netcdf4Dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">_netcdf4Dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="n">subsetURL</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_netcdf4Dataset</span> 
</pre></div>

        </details>

            <div class="docstring"><p>Returns an netCDF4.Dataset object subset of the ERDDAP dataset</p>

<p>Arguments:</p>

<p>This method will pass all kwargs to the netCDF4.Dataset method.</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.getDataRequestURL" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.getDataRequestURL">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">getDataRequestURL</span><span class="signature">(self, filetype=&#39;nc&#39;, useSafeURL=True, resultVariables=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">getDataRequestURL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filetype</span><span class="o">=</span><span class="n">DEFAULT_FILETYPE</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">resultVariables</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the fully built ERDDAP data request url with the available components. </span>

<span class="sd">    Arguments:</span>

<span class="sd">    `filetype` : The request download format </span>

<span class="sd">    `useSafeURL` : If True the query part of the url will be encoded</span>

<span class="sd">    `resultVariables` : If None, the self.resultVariables will be used.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">requestURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBaseURL</span><span class="p">(</span><span class="n">filetype</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">resultVariables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">&#39;opendap&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">loadDimensionValues</span><span class="p">()</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">:</span>
        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resultVariablesWithValidDapIndexing</span><span class="p">()</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="c1"># resultVariables = self._convertERDDAPSubset2OpendapRegular(resultVariables)</span>
        <span class="c1">#</span>
        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parseResultVariablesExtendedDapQueryToValidDap</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span><span class="p">:</span>
        <span class="n">resultVariables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resultVariablesWithValidDapIndexing</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resultVariables</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="n">query</span> <span class="o">+=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">parseQueryItems</span><span class="p">(</span><span class="n">resultVariables</span><span class="p">,</span> <span class="n">useSafeURL</span><span class="p">,</span> <span class="n">safe</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">item_separator</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

    <span class="n">requestURL</span> <span class="o">=</span> <span class="n">url_operations</span><span class="o">.</span><span class="n">joinURLElements</span><span class="p">(</span><span class="n">requestURL</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span> <span class="o">=</span> <span class="n">requestURL</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRequestURL</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns the fully built ERDDAP data request url with the available components. </p>

<p>Arguments:</p>

<p><code>filetype</code> : The request download format </p>

<p><code>useSafeURL</code> : If True the query part of the url will be encoded</p>

<p><code>resultVariables</code> : If None, the self.resultVariables will be used.</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.setSubset" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.setSubset">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">setSubset</span><span class="signature">(self, *pdims, **kwdims)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">setSubset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets a query subset for griddap request, by using dimension names</span>

<span class="sd">    Usage example:</span>

<span class="sd">    ```</span>
<span class="sd">    dsub = ( remote.setResultVariables([&#39;temperature&#39;,&#39;salinity&#39;])</span>
<span class="sd">                   .setSubset( time=slice(dt.datetime(2014,6,15), dt.datetime(2014,7,15)),</span>
<span class="sd">                               depth=0,</span>
<span class="sd">                               latitude=slice(18.10, 31.96), </span>
<span class="sd">                               longitude=slice(-98, -76.41))</span>
<span class="sd">                   .getxArray() )</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>Sets a query subset for griddap request, by using dimension names</p>

<p>Usage example:</p>

<pre><code>dsub = ( remote.setResultVariables(['temperature','salinity'])
               .setSubset( time=slice(dt.datetime(2014,6,15), dt.datetime(2014,7,15)),
                           depth=0,
                           latitude=slice(18.10, 31.96), 
                           longitude=slice(-98, -76.41))
               .getxArray() )
</code></pre>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.setSubsetI" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#ERDDAP_Griddap.setSubsetI">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">setSubsetI</span><span class="signature">(self, *pdims, **kwdims)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>  <span class="k">def</span> <span class="nf">setSubsetI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets a query subset for griddap request, by using its positional</span>
<span class="sd">    integer index.</span>

<span class="sd">    Usage example:</span>

<span class="sd">    ```</span>
<span class="sd">    dsub = ( remote.setResultVariables([&#39;temperature&#39;,&#39;salinity&#39;])</span>
<span class="sd">                   .setSubsetI( time=slice(-10,-1),</span>
<span class="sd">                                depth=0,</span>
<span class="sd">                                latitude=slice(10, 150), </span>
<span class="sd">                                longitude=slice(20, 100) )</span>
<span class="sd">                   .getxArray() )</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__positional_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="o">.</span><span class="n">subsetI</span><span class="p">(</span><span class="o">*</span><span class="n">pdims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwdims</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>

        </details>

            <div class="docstring"><p>Sets a query subset for griddap request, by using its positional
integer index.</p>

<p>Usage example:</p>

<pre><code>dsub = ( remote.setResultVariables(['temperature','salinity'])
               .setSubsetI( time=slice(-10,-1),
                            depth=0,
                            latitude=slice(10, 150), 
                            longitude=slice(20, 100) )
               .getxArray() )
</code></pre>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.positional_indexes" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Griddap.positional_indexes">#&nbsp;&nbsp</a>

        <span class="name">positional_indexes</span>
    </div>

    

                            </div>
                            <div id="ERDDAP_Griddap.xarray" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Griddap.xarray">#&nbsp;&nbsp</a>

        <span class="name">xarray</span>
    </div>

            <div class="docstring"><p>Returns the xarray object representation of the whoe dataset. Ths method creates the
xarray object by calling the open_dataset method and connecting to the 
opendap endpoint that ERDDAP provides.</p>
</div>


                            </div>
                            <div id="ERDDAP_Griddap.ncDataset" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#ERDDAP_Griddap.ncDataset">#&nbsp;&nbsp</a>

        <span class="name">ncDataset</span>
    </div>

            <div class="docstring"><p>Returns the netCDF4.Dataset object representation of the whole dataset. Ths method
creates the Dataset object by calling the Dataset constructor connecting 
to the opendap endpoint that ERDDAP provides.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#ERDDAP_Dataset">ERDDAP_Dataset</a></dt>
                                <dd id="ERDDAP_Griddap.BINARY_FILETYPES" class="variable"><a href="#ERDDAP_Dataset.BINARY_FILETYPES">BINARY_FILETYPES</a></dd>
                <dd id="ERDDAP_Griddap.setResultVariables" class="function"><a href="#ERDDAP_Dataset.setResultVariables">setResultVariables</a></dd>
                <dd id="ERDDAP_Griddap.addResultVariable" class="function"><a href="#ERDDAP_Dataset.addResultVariable">addResultVariable</a></dd>
                <dd id="ERDDAP_Griddap.setConstraints" class="function"><a href="#ERDDAP_Dataset.setConstraints">setConstraints</a></dd>
                <dd id="ERDDAP_Griddap.addConstraints" class="function"><a href="#ERDDAP_Dataset.addConstraints">addConstraints</a></dd>
                <dd id="ERDDAP_Griddap.addConstraint" class="function"><a href="#ERDDAP_Dataset.addConstraint">addConstraint</a></dd>
                <dd id="ERDDAP_Griddap.getURL" class="function"><a href="#ERDDAP_Dataset.getURL">getURL</a></dd>
                <dd id="ERDDAP_Griddap.getBaseURL" class="function"><a href="#ERDDAP_Dataset.getBaseURL">getBaseURL</a></dd>
                <dd id="ERDDAP_Griddap.getAttribute" class="function"><a href="#ERDDAP_Dataset.getAttribute">getAttribute</a></dd>
                <dd id="ERDDAP_Griddap.variables" class="variable"><a href="#ERDDAP_Dataset.variables">variables</a></dd>
                <dd id="ERDDAP_Griddap.info" class="variable"><a href="#ERDDAP_Dataset.info">info</a></dd>
                <dd id="ERDDAP_Griddap.getMetadataURL" class="function"><a href="#ERDDAP_Dataset.getMetadataURL">getMetadataURL</a></dd>
                <dd id="ERDDAP_Griddap.clearConstraints" class="function"><a href="#ERDDAP_Dataset.clearConstraints">clearConstraints</a></dd>
                <dd id="ERDDAP_Griddap.clearServerSideFunctions" class="function"><a href="#ERDDAP_Dataset.clearServerSideFunctions">clearServerSideFunctions</a></dd>
                <dd id="ERDDAP_Griddap.clearResultVariables" class="function"><a href="#ERDDAP_Dataset.clearResultVariables">clearResultVariables</a></dd>
                <dd id="ERDDAP_Griddap.getData" class="function"><a href="#ERDDAP_Dataset.getData">getData</a></dd>
                <dd id="ERDDAP_Griddap.getDataFrame" class="function"><a href="#ERDDAP_Dataset.getDataFrame">getDataFrame</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
        <script>/** elasticlunr - http://weixsong.github.io * Copyright (C) 2017 Oliver Nightingale * Copyright (C) 2017 Wei Song * MIT Licensed */!function(){function e(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.9.5",lunr=t,t.utils={},t.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),t.utils.toString=function(e){return void 0===e||null===e?"":e.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},t.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);-1!==n&&(this.events[e].splice(n,1),0==this.events[e].length&&delete this.events[e])}},t.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)},this)}},t.EventEmitter.prototype.hasHandler=function(e){return e in this.events},t.tokenizer=function(e){if(!arguments.length||null===e||void 0===e)return[];if(Array.isArray(e)){var n=e.filter(function(e){return null===e||void 0===e?!1:!0});n=n.map(function(e){return t.utils.toString(e).toLowerCase()});var i=[];return n.forEach(function(e){var n=e.split(t.tokenizer.seperator);i=i.concat(n)},this),i}return e.toString().trim().toLowerCase().split(t.tokenizer.seperator)},t.tokenizer.defaultSeperator=/[\s\-]+/,t.tokenizer.seperator=t.tokenizer.defaultSeperator,t.tokenizer.setSeperator=function(e){null!==e&&void 0!==e&&"object"==typeof e&&(t.tokenizer.seperator=e)},t.tokenizer.resetSeperator=function(){t.tokenizer.seperator=t.tokenizer.defaultSeperator},t.tokenizer.getSeperator=function(){return t.tokenizer.seperator},t.Pipeline=function(){this._queue=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in t.Pipeline.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[n]=e},t.Pipeline.getRegisteredFunction=function(e){return e in t.Pipeline.registeredFunctions!=!0?null:t.Pipeline.registeredFunctions[e]},t.Pipeline.warnIfFunctionNotRegistered=function(e){var n=e.label&&e.label in this.registeredFunctions;n||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var i=t.Pipeline.getRegisteredFunction(e);if(!i)throw new Error("Cannot load un-registered function: "+e);n.add(i)}),n},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._queue.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i+1,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i,0,n)},t.Pipeline.prototype.remove=function(e){var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},t.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,i=this._queue.length,o=0;n>o;o++){for(var r=e[o],s=0;i>s&&(r=this._queue[s](r,o,e),void 0!==r&&null!==r);s++);void 0!==r&&null!==r&&t.push(r)}return t},t.Pipeline.prototype.reset=function(){this._queue=[]},t.Pipeline.prototype.get=function(){return this._queue},t.Pipeline.prototype.toJSON=function(){return this._queue.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.DocumentStore,this.index={},this.eventEmitter=new t.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},t.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;n._fields=e.fields,n._ref=e.ref,n.documentStore=t.DocumentStore.load(e.documentStore),n.pipeline=t.Pipeline.load(e.pipeline),n.index={};for(var i in e.index)n.index[i]=t.InvertedIndex.load(e.index[i]);return n},t.Index.prototype.addField=function(e){return this._fields.push(e),this.index[e]=new t.InvertedIndex,this},t.Index.prototype.setRef=function(e){return this._ref=e,this},t.Index.prototype.saveDocument=function(e){return this.documentStore=new t.DocumentStore(e),this},t.Index.prototype.addDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.addDoc(i,e),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));this.documentStore.addFieldLength(i,n,o.length);var r={};o.forEach(function(e){e in r?r[e]+=1:r[e]=1},this);for(var s in r){var u=r[s];u=Math.sqrt(u),this.index[n].addToken(s,{ref:i,tf:u})}},this),n&&this.eventEmitter.emit("add",e,this)}},t.Index.prototype.removeDocByRef=function(e){if(e&&this.documentStore.isDocStored()!==!1&&this.documentStore.hasDoc(e)){var t=this.documentStore.getDoc(e);this.removeDoc(t,!1)}},t.Index.prototype.removeDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.hasDoc(i)&&(this.documentStore.removeDoc(i),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));o.forEach(function(e){this.index[n].removeToken(e,i)},this)},this),n&&this.eventEmitter.emit("remove",e,this))}},t.Index.prototype.updateDoc=function(e,t){var t=void 0===t?!0:t;this.removeDocByRef(e[this._ref],!1),this.addDoc(e,!1),t&&this.eventEmitter.emit("update",e,this)},t.Index.prototype.idf=function(e,t){var n="@"+t+"/"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,n))return this._idfCache[n];var i=this.index[t].getDocFreq(e),o=1+Math.log(this.documentStore.length/(i+1));return this._idfCache[n]=o,o},t.Index.prototype.getFields=function(){return this._fields.slice()},t.Index.prototype.search=function(e,n){if(!e)return[];e="string"==typeof e?{any:e}:JSON.parse(JSON.stringify(e));var i=null;null!=n&&(i=JSON.stringify(n));for(var o=new t.Configuration(i,this.getFields()).get(),r={},s=Object.keys(e),u=0;u<s.length;u++){var a=s[u];r[a]=this.pipeline.run(t.tokenizer(e[a]))}var l={};for(var c in o){var d=r[c]||r.any;if(d){var f=this.fieldSearch(d,c,o),h=o[c].boost;for(var p in f)f[p]=f[p]*h;for(var p in f)p in l?l[p]+=f[p]:l[p]=f[p]}}var v,g=[];for(var p in l)v={ref:p,score:l[p]},this.documentStore.hasDoc(p)&&(v.doc=this.documentStore.getDoc(p)),g.push(v);return g.sort(function(e,t){return t.score-e.score}),g},t.Index.prototype.fieldSearch=function(e,t,n){var i=n[t].bool,o=n[t].expand,r=n[t].boost,s=null,u={};return 0!==r?(e.forEach(function(e){var n=[e];1==o&&(n=this.index[t].expandToken(e));var r={};n.forEach(function(n){var o=this.index[t].getDocs(n),a=this.idf(n,t);if(s&&"AND"==i){var l={};for(var c in s)c in o&&(l[c]=o[c]);o=l}n==e&&this.fieldSearchStats(u,n,o);for(var c in o){var d=this.index[t].getTermFrequency(n,c),f=this.documentStore.getFieldLength(c,t),h=1;0!=f&&(h=1/Math.sqrt(f));var p=1;n!=e&&(p=.15*(1-(n.length-e.length)/n.length));var v=d*a*h*p;c in r?r[c]+=v:r[c]=v}},this),s=this.mergeScores(s,r,i)},this),s=this.coordNorm(s,u,e.length)):void 0},t.Index.prototype.mergeScores=function(e,t,n){if(!e)return t;if("AND"==n){var i={};for(var o in t)o in e&&(i[o]=e[o]+t[o]);return i}for(var o in t)o in e?e[o]+=t[o]:e[o]=t[o];return e},t.Index.prototype.fieldSearchStats=function(e,t,n){for(var i in n)i in e?e[i].push(t):e[i]=[t]},t.Index.prototype.coordNorm=function(e,t,n){for(var i in e)if(i in t){var o=t[i].length;e[i]=e[i]*o/n}return e},t.Index.prototype.toJSON=function(){var e={};return this._fields.forEach(function(t){e[t]=this.index[t].toJSON()},this),{version:t.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:e,pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},t.DocumentStore=function(e){this._save=null===e||void 0===e?!0:e,this.docs={},this.docInfo={},this.length=0},t.DocumentStore.load=function(e){var t=new this;return t.length=e.length,t.docs=e.docs,t.docInfo=e.docInfo,t._save=e.save,t},t.DocumentStore.prototype.isDocStored=function(){return this._save},t.DocumentStore.prototype.addDoc=function(t,n){this.hasDoc(t)||this.length++,this.docs[t]=this._save===!0?e(n):null},t.DocumentStore.prototype.getDoc=function(e){return this.hasDoc(e)===!1?null:this.docs[e]},t.DocumentStore.prototype.hasDoc=function(e){return e in this.docs},t.DocumentStore.prototype.removeDoc=function(e){this.hasDoc(e)&&(delete this.docs[e],delete this.docInfo[e],this.length--)},t.DocumentStore.prototype.addFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&(this.docInfo[e]||(this.docInfo[e]={}),this.docInfo[e][t]=n)},t.DocumentStore.prototype.updateFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&this.addFieldLength(e,t,n)},t.DocumentStore.prototype.getFieldLength=function(e,t){return null===e||void 0===e?0:e in this.docs&&t in this.docInfo[e]?this.docInfo[e][t]:0},t.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},t.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",i="[aeiouy]",o=n+"[^aeiouy]*",r=i+"[aeiou]*",s="^("+o+")?"+r+o,u="^("+o+")?"+r+o+"("+r+")?$",a="^("+o+")?"+r+o+r+o,l="^("+o+")?"+i,c=new RegExp(s),d=new RegExp(a),f=new RegExp(u),h=new RegExp(l),p=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,m=/^(.+?)(ed|ing)$/,y=/.$/,S=/(at|bl|iz)$/,x=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+o+i+"[^aeiouwxy]$"),I=/^(.+?[^aeiou])y$/,b=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,D=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,F=/^(.+?)(s|t)(ion)$/,_=/^(.+?)e$/,P=/ll$/,k=new RegExp("^"+o+i+"[^aeiouwxy]$"),z=function(n){var i,o,r,s,u,a,l;if(n.length<3)return n;if(r=n.substr(0,1),"y"==r&&(n=r.toUpperCase()+n.substr(1)),s=p,u=v,s.test(n)?n=n.replace(s,"$1$2"):u.test(n)&&(n=n.replace(u,"$1$2")),s=g,u=m,s.test(n)){var z=s.exec(n);s=c,s.test(z[1])&&(s=y,n=n.replace(s,""))}else if(u.test(n)){var z=u.exec(n);i=z[1],u=h,u.test(i)&&(n=i,u=S,a=x,l=w,u.test(n)?n+="e":a.test(n)?(s=y,n=n.replace(s,"")):l.test(n)&&(n+="e"))}if(s=I,s.test(n)){var z=s.exec(n);i=z[1],n=i+"i"}if(s=b,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+e[o])}if(s=E,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+t[o])}if(s=D,u=F,s.test(n)){var z=s.exec(n);i=z[1],s=d,s.test(i)&&(n=i)}else if(u.test(n)){var z=u.exec(n);i=z[1]+z[2],u=d,u.test(i)&&(n=i)}if(s=_,s.test(n)){var z=s.exec(n);i=z[1],s=d,u=f,a=k,(s.test(i)||u.test(i)&&!a.test(i))&&(n=i)}return s=P,u=d,s.test(n)&&u.test(n)&&(s=y,n=n.replace(s,"")),"y"==r&&(n=r.toLowerCase()+n.substr(1)),n};return z}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.stopWordFilter=function(e){return e&&t.stopWordFilter.stopWords[e]!==!0?e:void 0},t.clearStopWords=function(){t.stopWordFilter.stopWords={}},t.addStopWords=function(e){null!=e&&Array.isArray(e)!==!1&&e.forEach(function(e){t.stopWordFilter.stopWords[e]=!0},this)},t.resetStopWords=function(){t.stopWordFilter.stopWords=t.defaultStopWords},t.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,"do":!0,does:!0,either:!0,"else":!0,ever:!0,every:!0,"for":!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,"if":!0,"in":!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,"this":!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,"while":!0,who:!0,whom:!0,why:!0,will:!0,"with":!0,would:!0,yet:!0,you:!0,your:!0},t.stopWordFilter.stopWords=t.defaultStopWords,t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(e){if(null===e||void 0===e)throw new Error("token should not be undefined");return e.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.InvertedIndex=function(){this.root={docs:{},df:0}},t.InvertedIndex.load=function(e){var t=new this;return t.root=e.root,t},t.InvertedIndex.prototype.addToken=function(e,t,n){for(var n=n||this.root,i=0;i<=e.length-1;){var o=e[i];o in n||(n[o]={docs:{},df:0}),i+=1,n=n[o]}var r=t.ref;n.docs[r]?n.docs[r]={tf:t.tf}:(n.docs[r]={tf:t.tf},n.df+=1)},t.InvertedIndex.prototype.hasToken=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return!1;t=t[e[n]]}return!0},t.InvertedIndex.prototype.getNode=function(e){if(!e)return null;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return null;t=t[e[n]]}return t},t.InvertedIndex.prototype.getDocs=function(e){var t=this.getNode(e);return null==t?{}:t.docs},t.InvertedIndex.prototype.getTermFrequency=function(e,t){var n=this.getNode(e);return null==n?0:t in n.docs?n.docs[t].tf:0},t.InvertedIndex.prototype.getDocFreq=function(e){var t=this.getNode(e);return null==t?0:t.df},t.InvertedIndex.prototype.removeToken=function(e,t){if(e){var n=this.getNode(e);null!=n&&t in n.docs&&(delete n.docs[t],n.df-=1)}},t.InvertedIndex.prototype.expandToken=function(e,t,n){if(null==e||""==e)return[];var t=t||[];if(void 0==n&&(n=this.getNode(e),null==n))return t;n.df>0&&t.push(e);for(var i in n)"docs"!==i&&"df"!==i&&this.expandToken(e+i,t,n[i]);return t},t.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},t.Configuration=function(e,n){var e=e||"";if(void 0==n||null==n)throw new Error("fields should not be null");this.config={};var i;try{i=JSON.parse(e),this.buildUserConfig(i,n)}catch(o){t.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(n)}},t.Configuration.prototype.buildDefaultConfig=function(e){this.reset(),e.forEach(function(e){this.config[e]={boost:1,bool:"OR",expand:!1}},this)},t.Configuration.prototype.buildUserConfig=function(e,n){var i="OR",o=!1;if(this.reset(),"bool"in e&&(i=e.bool||i),"expand"in e&&(o=e.expand||o),"fields"in e)for(var r in e.fields)if(n.indexOf(r)>-1){var s=e.fields[r],u=o;void 0!=s.expand&&(u=s.expand),this.config[r]={boost:s.boost||0===s.boost?s.boost:1,bool:s.bool||i,expand:u}}else t.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(i,o,n)},t.Configuration.prototype.addAllFields2UserConfig=function(e,t,n){n.forEach(function(n){this.config[n]={boost:1,bool:e,expand:t}},this)},t.Configuration.prototype.get=function(){return this.config},t.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},lunr.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},lunr.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},lunr.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;){if(r===e)return o;e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o]}return r===e?o:-1},lunr.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;)e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o];return r>e?o:e>r?o+1:void 0},lunr.SortedSet.prototype.intersect=function(e){for(var t=new lunr.SortedSet,n=0,i=0,o=this.length,r=e.length,s=this.elements,u=e.elements;;){if(n>o-1||i>r-1)break;s[n]!==u[i]?s[n]<u[i]?n++:s[n]>u[i]&&i++:(t.add(s[n]),n++,i++)}return t},lunr.SortedSet.prototype.clone=function(){var e=new lunr.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},lunr.SortedSet.prototype.union=function(e){var t,n,i;this.length>=e.length?(t=this,n=e):(t=e,n=this),i=t.clone();for(var o=0,r=n.toArray();o<r.length;o++)i.add(r[o]);return i},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.elasticlunr=t()}(this,function(){return t})}();</script>
        <script>
            function escapeHTML(html) {
                return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
            }

            const originalContent = document.querySelector("main.pdoc");
            let currentContent = originalContent;

            function setContent(innerHTML) {
                let elem;
                if (innerHTML) {
                    elem = document.createElement("main");
                    elem.classList.add("pdoc");
                    elem.innerHTML = innerHTML;
                } else {
                    elem = originalContent;
                }
                if (currentContent !== elem) {
                    currentContent.replaceWith(elem);
                    currentContent = elem;
                }
            }

            function getSearchTerm() {
                return (new URL(window.location)).searchParams.get("search");
            }

            const searchBox = document.querySelector(".pdoc input[type=search]");
            searchBox.addEventListener("input", function () {
                let url = new URL(window.location);
                if (searchBox.value.trim()) {
                    url.hash = "";
                    url.searchParams.set("search", searchBox.value);
                } else {
                    url.searchParams.delete("search");
                }
                history.replaceState("", "", url.toString());
                onInput();
            });
            window.addEventListener("popstate", onInput);


            let searchIndex, searchErr;

            async function initialize() {
                let docs;
                try {
                    let resp = await fetch("search.json");
                    docs = await resp.json();
                } catch (e) {
                    searchErr = "Cannot fetch search index.";
                    throw e;
                }

                // Also split on html tags. this is a cheap heuristic, but good enough.
                elasticlunr.tokenizer.setSeperator(/[\s\-.;&]+|<[^>]*>/);

                if (docs._isPrebuiltIndex) {
                    console.info("using precompiled search index");
                    searchIndex = elasticlunr.Index.load(docs);
                } else {
                    console.time("building search index");
                    searchIndex = elasticlunr(function () {
                        this.addField('qualname');
                        this.addField('fullname');
                        this.addField('doc');
                        this.setRef('fullname');
                    });
                    for (let doc of docs) {
                        searchIndex.addDoc(doc);
                    }
                    console.timeEnd("building search index");
                }
                onInput();

                document.querySelector("nav.pdoc").addEventListener("click", e => {
                    if (e.target.hash) {
                        searchBox.value = "";
                        searchBox.dispatchEvent(new Event("input"));
                    }
                });
            }

            function onInput() {
                setContent((() => {
                    const search = getSearchTerm();
                    if (!search) {
                        return null
                    }
                    if (searchErr) {
                        return `<h3>Error: ${searchErr}</h3>`
                    }
                    if (!searchIndex) {
                        return "<h3>Searching...</h3>"
                    }

                    window.scrollTo({top: 0, left: 0, behavior: 'auto'});

                    const results = searchIndex.search(search, {
                        fields: {
                            qualname: {boost: 4},
                            fullname: {boost: 2},
                            doc: {boost: 1},
                        },
                        expand: true
                    });

                    let html;
                    if (results.length === 0) {
                        html = `No search results for '${escapeHTML(search)}'.`
                    } else {
                        html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(search)}'.</h4>`;
                    }
                    for (let result of results.slice(0, 10)) {
                        let doc = result.doc;
                        let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                        if (doc.qualname) {
                            url += `#${doc.qualname}`;
                        }

                        let heading;
                        switch (result.doc.type) {
                            case "function":
                                heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span><span class="signature">(${doc.parameters.join(", ")})</span>`;
                                break;
                            case "class":
                                heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                                break;
                            default:
                                heading = `<span class="name">${doc.fullname}</span>`;
                                break;
                        }
                        html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

                    }
                    return html;
                })());
            }

            if (getSearchTerm()) {
                initialize();
                searchBox.value = getSearchTerm();
                onInput();
            } else {
                searchBox.addEventListener("focus", initialize, {once: true});
            }

            searchBox.addEventListener("keydown", e => {
                if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
                    let focused = currentContent.querySelector(".search-result.focused");
                    if (!focused) {
                        currentContent.querySelector(".search-result").classList.add("focused");
                    } else if (
                        e.key === "ArrowDown"
                        && focused.nextElementSibling
                        && focused.nextElementSibling.classList.contains("search-result")
                    ) {
                        focused.classList.remove("focused");
                        focused.nextElementSibling.classList.add("focused");
                        focused.nextElementSibling.scrollIntoView({
                            behavior: "smooth",
                            block: "nearest",
                            inline: "nearest"
                        });
                    } else if (
                        e.key === "ArrowUp"
                        && focused.previousElementSibling
                        && focused.previousElementSibling.classList.contains("search-result")
                    ) {
                        focused.classList.remove("focused");
                        focused.previousElementSibling.classList.add("focused");
                        focused.previousElementSibling.scrollIntoView({
                            behavior: "smooth",
                            block: "nearest",
                            inline: "nearest"
                        });
                    } else if (
                        e.key === "Enter"
                    ) {
                        focused.querySelector("a").click();
                    }
                }
            });
        </script>
</body>
</html>